(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["chatsora"]=t():e["chatsora"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),s={};s[i]="z",e.exports="[object z]"===String(s)},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"057f":function(e,t,n){var r=n("fc6a"),i=n("241c").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):i(r(e))}},"0676":function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n},"06cf":function(e,t,n){var r=n("83ab"),i=n("d1e7"),s=n("5c6c"),o=n("fc6a"),a=n("c04e"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(n){}if(c(e,t))return s(!i.f.call(e,t),e[t])}},"07ac":function(e,t,n){var r=n("23e7"),i=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},"0a06":function(e,t,n){"use strict";var r=n("c532"),i=n("30b5"),s=n("f6b4"),o=n("5270"),a=n("4a7b");function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=a(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=c},"0cb2":function(e,t,n){var r=n("7b0b"),i=Math.floor,s="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,a=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,c,u,l){var f=n+e.length,h=c.length,d=a;return void 0!==u&&(u=r(u),d=o),s.call(l,d,(function(r,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(f);case"<":o=u[s.slice(1,-1)];break;default:var a=+s;if(0===a)return r;if(a>h){var l=i(a/10);return 0===l?r:l<=h?void 0===c[l-1]?s.charAt(1):c[l-1]+s.charAt(1):r}o=c[a-1]}return void 0===o?"":o}))}},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),s=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"11b0":function(e,t,n){function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0"),e.exports=r},"13d5":function(e,t,n){"use strict";var r=n("23e7"),i=n("d58f").left,s=n("a640"),o=n("ae40"),a=n("2d00"),c=n("605d"),u=s("reduce"),l=o("reduce",{1:0}),f=!c&&a>79&&a<83;r({target:"Array",proto:!0,forced:!u||!l||f},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),s=n("17c2"),o=n("9112");for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==s)try{o(u,"forEach",s)}catch(l){u.forEach=s}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),s=n("ae40"),o=i("forEach"),a=s("forEach");e.exports=o&&a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),s=n("2d00"),o=i("species");e.exports=function(e){return s>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1fb5":function(e,t,n){"use strict";t.byteLength=l,t.toByteArray=h,t.fromByteArray=v;for(var r=[],i=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function l(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function f(e,t,n){return 3*(t+n)/4-n}function h(e){var t,n,r=u(e),o=r[0],a=r[1],c=new s(f(e,o,a)),l=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c}function d(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(d(r));return i.join("")}function v(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(p(e,a,a+o>c?c:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2236:function(e,t,n){var r=n("5a43");function i(e){if(Array.isArray(e))return r(e)}e.exports=i},2266:function(e,t,n){var r=n("825a"),i=n("e95a"),s=n("50c4"),o=n("0366"),a=n("35a1"),c=n("2a62"),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,f,h,d,p,v,g,y=n&&n.that,m=!(!n||!n.AS_ENTRIES),w=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),x=o(t,y,1+m+b),_=function(e){return l&&c(l),new u(!0,e)},k=function(e){return m?(r(e),b?x(e[0],e[1],_):x(e[0],e[1])):b?x(e,_):x(e)};if(w)l=e;else{if(f=a(e),"function"!=typeof f)throw TypeError("Target is not iterable");if(i(f)){for(h=0,d=s(e.length);d>h;h++)if(p=k(e[h]),p&&p instanceof u)return p;return new u(!1)}l=f.call(e)}v=l.next;while(!(g=v.call(l)).done){try{p=k(g.value)}catch(E){throw c(l),E}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},"23cb":function(e,t,n){var r=n("a691"),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,s=n("9112"),o=n("6eeb"),a=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,f,h,d,p,v=e.target,g=e.global,y=e.stat;if(l=g?r:y?r[v]||a(v,{}):(r[v]||{}).prototype,l)for(f in t){if(d=t[f],e.noTargetGet?(p=i(l,f),h=p&&p.value):h=l[f],n=u(g?f:v+(y?".":"#")+f,e.forced),!n&&void 0!==h){if(typeof d===typeof h)continue;c(d,h)}(e.sham||h&&h.sham)&&s(d,"sham",!0),o(l,f,d,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},2444:function(e,t,n){"use strict";(function(t){var r=n("c532"),i=n("c8af"),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function a(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}var c={adapter:a(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(s)})),e.exports=c}).call(this,n("4362"))},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),i=n("825a"),s=n("d039"),o=n("ad6d"),a="toString",c=RegExp.prototype,u=c[a],l=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=a;(l||f)&&r(RegExp.prototype,a,(function(){var e=i(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?o.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),s=n("b622"),o=n("83ab"),a=s("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"278c":function(e,t,n){var r=n("c135"),i=n("9b42"),s=n("6613"),o=n("c240");function a(e,t){return r(e)||i(e,t)||s(e,t)||o()}e.exports=a},"29d8":function(e,t,n){},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2cf4":function(e,t,n){var r,i,s,o=n("da84"),a=n("d039"),c=n("0366"),u=n("1be4"),l=n("cc12"),f=n("1cdc"),h=n("605d"),d=o.location,p=o.setImmediate,v=o.clearImmediate,g=o.process,y=o.MessageChannel,m=o.Dispatch,w=0,b={},x="onreadystatechange",_=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},k=function(e){return function(){_(e)}},E=function(e){_(e.data)},C=function(e){o.postMessage(e+"",d.protocol+"//"+d.host)};p&&v||(p=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return b[++w]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(w),w},v=function(e){delete b[e]},h?r=function(e){g.nextTick(k(e))}:m&&m.now?r=function(e){m.now(k(e))}:y&&!f?(i=new y,s=i.port2,i.port1.onmessage=E,r=c(s.postMessage,s,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&d&&"file:"!==d.protocol&&!a(C)?(r=C,o.addEventListener("message",E,!1)):r=x in l("script")?function(e){u.appendChild(l("script"))[x]=function(){u.removeChild(this),_(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:p,clear:v}},"2d00":function(e,t,n){var r,i,s=n("da84"),o=n("342f"),a=s.process,c=a&&a.versions,u=c&&c.v8;u?(r=u.split("."),i=r[0]+r[1]):o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=r[1]))),e.exports=i&&+i},"2d83":function(e,t,n){"use strict";var r=n("387f");e.exports=function(e,t,n,i,s){var o=new Error(e);return r(o,t,n,i,s)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"30b5":function(e,t,n){"use strict";var r=n("c532");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("3f8c"),s=n("b622"),o=s("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},"36c4":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return Le}));var i=n("1fb5"),s=n("a559"),o=n.n(s),a=n("7037"),c=n.n(a),u=n("4082"),l=n.n(u),f=n("448a"),h=n.n(f),d=n("a34a"),p=n.n(d),v=n("c973"),g=n.n(v),y=n("970b"),m=n.n(y),w=n("5bc3"),b=n.n(w),x=n("9523"),_=n.n(x),k=n("bc3a"),E=n.n(k),C=n("ff91"),S=n.n(C),R=n("278c"),O=n.n(R),U=n("e556"),A=n.n(U),P=n("3fe3"),j=n.n(P);function T(e){return"string"===typeof e}function I(e,t){return t&&T(e)}function M(e,t){var n=[];if(T(e)&&I(e,t)){for(var r=0,i=e.length;r<i;r++)if(e.charAt(r)){var s=e.charAt(r),o=t(s,r,e);n[r]=o}}else if(!T(e)&&!I(e,t))for(var a=0,c=e.length;a<c;a++)if(a in e){var u=e[a],l=t(u,a,e);n[a]=l}return n}var L=function(e){return Object(i["fromByteArray"])(new Uint8Array(M(e,(function(e){return e.charCodeAt(0)}))))},D=function(e){var t,n,r,i,s={},o=String.fromCharCode,a=e.length,c=0,u=0,l="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;t<64;t++)s[f.charAt(t)]=t;for(r=0;r<a;r++){n=s[e.charAt(r)],c=(c<<6)+n,u+=6;while(u>=8)((i=c>>>(u-=8)&255)||r<a-2)&&(l+=o(i))}return l},B=null;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(){function e(t){var n,r=this;m()(this,e),_()(this,"_channel",void 0),_()(this,"watcher_count",void 0),_()(this,"typing",void 0),_()(this,"read",void 0),_()(this,"messages",void 0),_()(this,"pinnedMessages",void 0),_()(this,"threads",void 0),_()(this,"mutedUsers",void 0),_()(this,"watchers",void 0),_()(this,"members",void 0),_()(this,"unreadCount",void 0),_()(this,"membership",void 0),_()(this,"last_message_at",void 0),_()(this,"isUpToDate",void 0),_()(this,"setIsUpToDate",(function(e){r.isUpToDate=e})),_()(this,"removeMessageFromArray",(function(e,t){var n=e.filter((function(e){return!(e.id&&t.id&&e.id===t.id)}));return{removed:n.length<e.length,result:n}})),this._channel=t,this.watcher_count=0,this.typing=S()({}),this.read=S()({}),this.messages=S()([]),this.pinnedMessages=S()([]),this.threads=S()({}),this.mutedUsers=S()([]),this.watchers=S()({}),this.members=S()({}),this.membership=S()({}),this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=null!=(null===t||void 0===t||null===(n=t.state)||void 0===n?void 0:n.last_message_at)?new Date(t.state.last_message_at):null}return b()(e,[{key:"addMessageSorted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.addMessagesSorted([e],t)}},{key:"messageToImmutable",value:function(e){return S()(F(F({},e),{},{__html:e.html,pinned_at:e.pinned_at?new Date(e.pinned_at):null,created_at:e.created_at?new Date(e.created_at):new Date,updated_at:e.updated_at?new Date(e.updated_at):new Date,status:e.status||"received"}))}},{key:"addMessagesSorted",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r+=1){var i=this.messageToImmutable(e[r]);n&&i.id&&this.threads[i.id]&&(this.threads=this.threads.without(i.id)),this.last_message_at||(this.last_message_at=new Date(i.created_at.getTime())),i.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(i.created_at.getTime()));var s=i.parent_id;if(s&&!i.show_in_channel||(this.messages=this._addToMessageList(this.messages,i,t)),s){var o=this.threads[s]||S()([]),a=this._addToMessageList(o,i,t);this.threads=this.threads.set(s,a)}}}},{key:"addPinnedMessages",value:function(e){for(var t=0;t<e.length;t+=1)this.addPinnedMessage(e[t])}},{key:"addPinnedMessage",value:function(e){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.messageToImmutable(e),!1,"pinned_at")}},{key:"removePinnedMessage",value:function(e){var t=this.removeMessageFromArray(this.pinnedMessages,e),n=t.result;this.pinnedMessages=n}},{key:"addReaction",value:function(e,t,n){var r=this.messages;if(t){var i=t.parent_id,s=t.show_in_channel;if(i&&this.threads[i])for(var o=this.threads[i],a=0;a<o.length;a++){var c=o[a],u=this._addReactionToMessage(c,e,n);if(u){this.threads=this.threads.set(i,o.set(a,u));break}}if(!s&&!i||s)for(var l=0;l<r.length;l++){var f=r[l],h=this._addReactionToMessage(f,e,n);if(h){this.messages=r.set(l,h);break}}}}},{key:"_addReactionToMessage",value:function(e,t,n){var r,i=!!e.id&&e.id===t.message_id;if(!i)return!1;var s=this._removeReactionFromMessage(e,t,n);return this._channel.getClient().userID===(null===(r=t.user)||void 0===r?void 0:r.id)&&(s=s.update("own_reactions",(function(e){return e.concat([t])}))),s=s.update("latest_reactions",(function(e){return e.concat([t])})),s=s.updateIn(["reaction_counts",t.type],(function(e){return e?e+1:1})),s}},{key:"_removeReactionFromMessage",value:function(e,t,n){var r=function(e){return e.filter((function(e){var r,i,s,o;return n?(null===(r=e.user)||void 0===r?void 0:r.id)!==(null===(i=t.user)||void 0===i?void 0:i.id):e.type!==t.type||(null===(s=e.user)||void 0===s?void 0:s.id)!==(null===(o=t.user)||void 0===o?void 0:o.id)}))},i=e.update("own_reactions",r);if(i=i.update("latest_reactions",r),n){var s,o=null===(s=e.own_reactions)||void 0===s?void 0:s.find((function(e){var n=e.type;return n===t.type}));o&&(i=i.updateIn(["reaction_counts",o.type],(function(e){return e?e-1:0})))}return i}},{key:"removeReaction",value:function(e,t){var n=this.messages;if(t){var r=t.parent_id,i=t.show_in_channel;if(r&&this.threads[r])for(var s=this.threads[r],o=0;o<s.length;o++){var a=s[o],c=!!a.id&&a.id===e.message_id;if(c){var u=this._removeReactionFromMessage(a,e);u=u.updateIn(["reaction_counts",e.type],(function(e){return e?e-1:0})),this.threads=this.threads.set(r,s.set(o,u));break}}if(!i&&!r||i)for(var l=0;l<n.length;l++){var f=n[l],h=!!f.id&&f.id===e.message_id;if(h){var d=this._removeReactionFromMessage(f,e);d=d.updateIn(["reaction_counts",e.type],(function(e){return e?e-1:0})),this.messages=n.set(l,d);break}}}}},{key:"_addToMessageList",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"created_at",i=e;if(n&&(i=i.filter((function(e){return!(e.id&&t.id===e.id)}))),0===i.length)return i.concat(t);var s=t[r].getTime();if(i[i.length-1][r].getTime()<s)return i.concat(t);var o=0,a=0,c=i.length-1;while(o<=c)a=Math.floor((c+o)/2),i[a][r].getTime()<=s?o=a+1:c=a-1;if(!n&&t.id){if(i[o]&&t.id===i[o].id)return i.set(o,t);if(i[o-1]&&t.id===i[o-1].id)return i.set(o-1,t)}var u=i.asMutable();return u.splice(o,0,t),S()(u)}},{key:"removeMessage",value:function(e){var t=!1;if(e.parent_id&&this.threads[e.parent_id]){var n=this.removeMessageFromArray(this.threads[e.parent_id],e),r=n.removed,i=n.result;this.threads=this.threads[e.parent_id].set(e.parent_id,i),t=r}else{var s=this.removeMessageFromArray(this.messages,e),o=s.removed,a=s.result;this.messages=a,t=o}return t}},{key:"filterErrorMessages",value:function(){var e=this.messages.filter((function(e){return"error"!==e.type}));this.messages=e}},{key:"clean",value:function(){for(var e=new Date,t=0,n=Object.entries(this.typing);t<n.length;t++){var r=O()(n[t],2),i=r[0],s=r[1],o="string"===typeof s.received_at&&e.getTime()-new Date(s.received_at).getTime();o>7e3&&(this.typing=this.typing.without(i),this._channel.getClient().dispatchEvent({type:"typing.stop",user:{id:i},cid:this._channel.cid}))}}},{key:"clearMessages",value:function(){this.messages=S()([])}}]),e}();function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={"channel.created":!0,"channel.deleted":!0,"channel.hidden":!0,"channel.muted":!0,"channel.truncated":!0,"channel.unmuted":!0,"channel.updated":!0,"channel.visible":!0,"health.check":!0,"member.added":!0,"member.removed":!0,"member.updated":!0,"message.deleted":!0,"message.new":!0,"message.read":!0,"message.updated":!0,"notification.added_to_channel":!0,"notification.channel_deleted":!0,"notification.channel_mutes_updated":!0,"notification.channel_truncated":!0,"notification.invite_accepted":!0,"notification.invite_rejected":!0,"notification.invited":!0,"notification.mark_read":!0,"notification.message_new":!0,"notification.mutes_updated":!0,"notification.removed_from_channel":!0,"reaction.deleted":!0,"reaction.new":!0,"reaction.updated":!0,"typing.start":!0,"typing.stop":!0,"user.banned":!0,"user.deleted":!0,"user.presence.changed":!0,"user.unbanned":!0,"user.updated":!0,"user.watching.start":!0,"user.watching.stop":!0,"connection.changed":!0,"connection.recovered":!0},q=z(z({},H),{},{all:!0}),W=function(e){return q[e]||!1};function G(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=K(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function K(e,t){if(e){if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){e.then().catch((function(e){console.warn("failed to do ".concat(t,", ran into error: "),e)}))}var X=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function Q(e){return e&&("[object Function]"===Object.prototype.toString.call(e)||"function"===typeof e||e instanceof Function)}var Z={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function ee(e){return null!==e&&"object"===c()(e)&&(e.readable||"function"===typeof e._read)}function te(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ne(e){return"undefined"!==typeof window&&"File"in window&&e instanceof File}function re(e,t,n){var r=new A.a;return ee(e)||te(e)||ne(e)?t?r.append("file",e,t):r.append("file",e):r.append("file",{uri:e,name:t||e.split("/").reverse()[0],contentType:n||void 0,type:n||void 0}),r}function ie(e){var t,n=[],r=Array.isArray(e)?e:[e],i=G(r);try{for(i.s();!(t=i.n()).done;){var s=t.value,o=Object.entries(s);o.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(var a=0,c=o;a<c.length;a++){var u=O()(c[a],2),l=u[0],f=u[1];n.push({field:l,direction:f})}}}catch(h){i.e(h)}finally{i.f()}return n}var se="ModuleSymbhasOwnPr0123456789ABCDEFGHNRVfgctiUvzKqYTJkLxpZXIjQW";function oe(){for(var e="",t=0;t<21;t++)e+=se[64*Math.random()|0];return e}function ae(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function ce(e,t){if(e){if("string"===typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(){function e(t,n,r,i){var s=this;m()(this,e),_()(this,"_client",void 0),_()(this,"type",void 0),_()(this,"id",void 0),_()(this,"data",void 0),_()(this,"_data",void 0),_()(this,"cid",void 0),_()(this,"listeners",void 0),_()(this,"state",void 0),_()(this,"initialized",void 0),_()(this,"lastKeyStroke",void 0),_()(this,"lastTypingEvent",void 0),_()(this,"isTyping",void 0),_()(this,"disconnected",void 0),_()(this,"create",g()(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={watch:!1,state:!1,presence:!1},e.next=3,s.query(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),_()(this,"_callChannelListeners",(function(e){var t=s,n=[];t.listeners.all&&n.push.apply(n,h()(t.listeners.all)),t.listeners[e.type]&&n.push.apply(n,h()(t.listeners[e.type]));for(var r=0,i=n;r<i.length;r++){var o=i[r];"string"!==typeof o&&o(e)}})),_()(this,"_channelURL",(function(){if(!s.id)throw new Error("channel id is not defined");return"".concat(s.getClient().baseURL,"/channels/").concat(s.type,"/").concat(s.id)}));var o=/^[\w_-]+$/,a=/^[\w!_-]+$/;if(!o.test(n))throw new Error("Invalid chat type ".concat(n,', letters, numbers and "_-" are allowed'));if("string"===typeof r&&!a.test(r))throw new Error("Invalid chat id ".concat(r,', letters, numbers and "!-_" are allowed'));this._client=t,this.type=n,this.id=r,this.data=i,this._data=fe({},i),this.cid="".concat(n,":").concat(r),this.listeners={},this.state=new $(this),this.initialized=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1}return b()(e,[{key:"getClient",value:function(){if(!0===this.disconnected)throw Error("You can't use a channel after client.disconnect() was called");return this._client}},{key:"getConfig",value:function(){var e=this.getClient();return e.configs[this.type]}},{key:"sendMessage",value:function(){var e=g()(p.a.mark((function e(t){var n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL()+"/message",{message:t});case 2:return n=e.sent,this.state.unreadCount=0,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendFile",value:function(e,t,n,r){return this.getClient().sendFile("".concat(this._channelURL(),"/file"),e,t,n,r)}},{key:"sendImage",value:function(e,t,n,r){return this.getClient().sendFile("".concat(this._channelURL(),"/image"),e,t,n,r)}},{key:"deleteFile",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/file"),{url:e})}},{key:"deleteImage",value:function(e){return this.getClient().delete("".concat(this._channelURL(),"/image"),{url:e})}},{key:"sendEvent",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._checkInitialized(),e.next=3,this.getClient().post(this._channelURL()+"/event",{event:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=fe({filter_conditions:{cid:this.cid}},n),"string"!==typeof t){e.next=6;break}r.query=t,e.next=11;break;case 6:if("object"!==c()(t)){e.next=10;break}r.message_filter_conditions=t,e.next=11;break;case 10:throw Error("Invalid type ".concat(c()(t)," for query parameter"));case 11:return e.next=13,this.getClient().wsPromise;case 13:return e.next=15,this.getClient().get(this.getClient().baseURL+"/search",{payload:r});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryMembers",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i,s,o,a,c=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:[],i=c.length>2&&void 0!==c[2]?c[2]:{},o=this.type,this.id?s=this.id:null!==(n=this.data)&&void 0!==n&&n.members&&Array.isArray(this.data.members)&&(a=this.data.members),e.next=6,this.getClient().get(this.getClient().baseURL+"/members",{payload:fe({type:o,id:s,members:a,sort:ie(r),filter_conditions:t},i)});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendReaction",value:function(){var e=g()(p.a.mark((function e(t,n,r,i){var s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("Message id is missing");case 2:if(n&&0!==Object.keys(n).length){e.next=4;break}throw Error("Reaction object is missing");case 4:return s={reaction:n,enforce_unique:i},null!=r&&(s.reaction=fe(fe({},n),{},{user:{id:r}})),e.next=8,this.getClient().post(this.getClient().baseURL+"/messages/".concat(t,"/reaction"),s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"deleteReaction",value:function(e,t,n){if(this._checkInitialized(),!t||!e)throw Error("Deleting a reaction requires specifying both the message and reaction type");var r=this.getClient().baseURL+"/messages/".concat(e,"/reaction/").concat(t);return n?this.getClient().delete(r,{user_id:n}):this.getClient().delete(r,{})}},{key:"update",value:function(){var e=g()(p.a.mark((function e(){var t,n,r,i,s=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1?s[1]:void 0,r=["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at"],r.forEach((function(e){delete t[e]})),e.next=6,this.getClient().post(this._channelURL(),{message:n,data:t});case 6:return i=e.sent,this.data=i.channel,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePartial",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().patch(this._channelURL(),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"enableSlowMode",value:function(){var e=g()(p.a.mark((function e(t){var n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{cooldown:t});case 2:return n=e.sent,this.data=n.channel,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disableSlowMode",value:function(){var e=g()(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{cooldown:0});case 2:return t=e.sent,this.data=t.channel,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=g()(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().delete(this._channelURL(),{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"truncate",value:function(){var e=g()(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL()+"/truncate",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"acceptInvite",value:function(){var e=g()(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.getClient().post(this._channelURL(),fe({accept_invite:!0},t));case 3:return n=e.sent,this.data=n.channel,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rejectInvite",value:function(){var e=g()(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.getClient().post(this._channelURL(),fe({reject_invite:!0},t));case 3:return n=e.sent,this.data=n.channel,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addMembers",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{add_members:t,message:n});case 2:return r=e.sent,this.data=r.channel,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"addModerators",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{add_moderators:t,message:n});case 2:return r=e.sent,this.data=r.channel,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"inviteMembers",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{invites:t,message:n});case 2:return r=e.sent,this.data=r.channel,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeMembers",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{remove_members:t,message:n});case 2:return r=e.sent,this.data=r.channel,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"demoteModerators",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL(),{demote_moderators:t,message:n});case 2:return r=e.sent,this.data=r.channel,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mute",value:function(){var e=g()(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",fe({channel_cid:this.cid},t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unmute",value:function(){var e=g()(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",fe({channel_cid:this.cid},t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"muteStatus",value:function(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}},{key:"sendAction",value:function(e,t){if(this._checkInitialized(),!e)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+"/messages/".concat(e,"/action"),{message_id:e,form_data:t,id:this.id,type:this.type})}},{key:"keystroke",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(n=this.getConfig())&&void 0!==n&&n.typing_events){e.next=2;break}return e.abrupt("return");case 2:if(r=new Date,i=this.lastTypingEvent&&r.getTime()-this.lastTypingEvent.getTime(),this.lastKeyStroke=r,this.isTyping=!0,!(null===i||i>2e3)){e.next=10;break}return this.lastTypingEvent=new Date,e.next=10,this.sendEvent({type:"typing.start",parent_id:t});case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopTyping",value:function(){var e=g()(p.a.mark((function e(t){var n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(n=this.getConfig())&&void 0!==n&&n.typing_events){e.next=2;break}return e.abrupt("return");case 2:return this.lastTypingEvent=null,this.isTyping=!1,e.next=6,this.sendEvent({type:"typing.stop",parent_id:t});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"lastMessage",value:function(){var e=this.state.messages.length-5;e<0&&(e=0);var t,n=this.state.messages.length+1,r=this.state.messages.slice(e,n).asMutable();return r.sort((function(e,t){return t.created_at.getTime()-e.created_at.getTime()})),r.length>0&&(t=r[0]),t}},{key:"markRead",value:function(){var e=g()(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:{},this._checkInitialized(),null!==(t=this.getConfig())&&void 0!==t&&t.read_events){e.next=4;break}return e.abrupt("return",Promise.resolve(null));case 4:return e.next=6,this.getClient().post(this._channelURL()+"/read",fe({},n));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clean",value:function(){if(this.lastKeyStroke){var e=new Date,t=e.getTime()-this.lastKeyStroke.getTime();t>1e3&&this.isTyping&&V(this.stopTyping(),"stop typing event")}this.state.clean()}},{key:"watch",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={state:!0,watch:!0,presence:!1},e.next=3,this.getClient().wsPromise;case 3:return this.getClient()._hasConnectionID()||(n.watch=!1),r=fe(fe({},n),t),e.next=7,this.query(r);case 7:return i=e.sent,this.initialized=!0,this.data=i.channel,this._client.logger("info","channel:watch() - started watching channel ".concat(this.cid),{tags:["channel"],channel:this}),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopWatching",value:function(){var e=g()(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().post(this._channelURL()+"/stop-watching",{});case 2:return t=e.sent,this._client.logger("info","channel:watch() - stopped watching channel ".concat(this.cid),{tags:["channel"],channel:this}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReplies",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().get(this.getClient().baseURL+"/messages/".concat(t,"/replies"),fe({},n));case 2:return r=e.sent,r.messages&&this.state.addMessagesSorted(r.messages),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getReactions",value:function(e,t){return this.getClient().get(this.getClient().baseURL+"/messages/".concat(e,"/reactions"),fe({},t))}},{key:"getMessagesById",value:function(e){return this.getClient().get(this._channelURL()+"/messages",{ids:e.join(",")})}},{key:"lastRead",value:function(){this._checkInitialized();var e=this.getClient(),t=e.userID;if(t)return this.state.read[t]?this.state.read[t].last_read:null}},{key:"_countMessageAsUnread",value:function(e){var t,n;return!e.shadowed&&(!e.silent&&((null===(t=e.user)||void 0===t?void 0:t.id)!==this.getClient().userID&&(null===(n=e.user)||void 0===n||!n.id||!this.getClient().userMuteStatus(e.user.id))))}},{key:"countUnread",value:function(e){if(!e)return this.state.unreadCount;for(var t=0,n=0;n<this.state.messages.length;n+=1){var r=this.state.messages[n];r.created_at>e&&this._countMessageAsUnread(r)&&t++}return t}},{key:"countUnreadMentions",value:function(){for(var e=this.lastRead(),t=this.getClient().userID,n=0,r=0;r<this.state.messages.length;r+=1){var i,s=this.state.messages[r];this._countMessageAsUnread(s)&&(!e||s.created_at>e)&&null!==(i=s.mentioned_users)&&void 0!==i&&i.find((function(e){return e.id===t}))&&n++}return n}},{key:"query",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i,s,o;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getClient().wsPromise;case 2:return n="".concat(this.getClient().baseURL,"/channels/").concat(this.type),this.id&&(n+="/".concat(this.id)),e.next=6,this.getClient().post(n+"/query",fe({data:this._data,state:!0},t));case 6:return r=e.sent,this.id||(this.id=r.channel.id,this.cid=r.channel.cid,s=null===(i=r.members.map((function(e){return e.user_id})))||void 0===i?void 0:i.sort().join(","),o="".concat(this.type,":!members-").concat(s),o in this.getClient().activeChannels&&delete this.getClient().activeChannels[o],this.cid in this.getClient().activeChannels||(this.getClient().activeChannels[this.cid]=this)),this.getClient()._addChannelConfig(r),this._initializeState(r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"banUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._checkInitialized(),e.next=3,this.getClient().banUser(t,fe(fe({},n),{},{type:this.type,id:this.id}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"hide",value:function(){var e=g()(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]&&r[1],this._checkInitialized(),e.next=5,this.getClient().post("".concat(this._channelURL(),"/hide"),{user_id:t,clear_history:n});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show",value:function(){var e=g()(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,this._checkInitialized(),e.next=4,this.getClient().post("".concat(this._channelURL(),"/show"),{user_id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unbanUser",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._checkInitialized(),e.next=3,this.getClient().unbanUser(t,{type:this.type,id:this.id});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"shadowBan",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._checkInitialized(),e.next=3,this.getClient().shadowBan(t,fe(fe({},n),{},{type:this.type,id:this.id}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeShadowBan",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._checkInitialized(),e.next=3,this.getClient().removeShadowBan(t,{type:this.type,id:this.id});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"on",value:function(e,t){var n=t?e:"all",r=W(n);if(!r)throw Error("Invalid event type ".concat(n));var i=t||e;n in this.listeners||(this.listeners[n]=[]),this._client.logger("info","Attaching listener for ".concat(n," event on channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[n].push(i)}},{key:"off",value:function(e,t){var n=t?e:"all",r=W(n);if(!r)throw Error("Invalid event type ".concat(n));var i=t||e;n in this.listeners||(this.listeners[n]=[]),this._client.logger("info","Removing listener for ".concat(n," event from channel ").concat(this.cid),{tags:["event","channel"],channel:this}),this.listeners[n]=this.listeners[n].filter((function(e){return e!==i}))}},{key:"_handleChannelEvent",value:function(e){var t,n,r,i,s,o,a,c=this;this._client.logger("info","channel:_handleChannelEvent - Received event of type { ".concat(e.type," } on ").concat(this.cid),{tags:["event","channel"],channel:this});var u=c.state;switch(e.type){case"typing.start":null!==(t=e.user)&&void 0!==t&&t.id&&(u.typing=u.typing.set(e.user.id,S()(e)));break;case"typing.stop":null!==(n=e.user)&&void 0!==n&&n.id&&(u.typing=u.typing.without(e.user.id));break;case"message.read":var l,f;if(null!==(r=e.user)&&void 0!==r&&r.id)u.read=u.read.set(e.user.id,S()({user:fe({},e.user),last_read:e.received_at})),(null===(l=e.user)||void 0===l?void 0:l.id)===(null===(f=this.getClient().user)||void 0===f?void 0:f.id)&&(u.unreadCount=0);break;case"user.watching.start":case"user.updated":null!==(i=e.user)&&void 0!==i&&i.id&&(u.watchers=u.watchers.set(e.user.id,S()(e.user)));break;case"user.watching.stop":null!==(s=e.user)&&void 0!==s&&s.id&&(u.watchers=u.watchers.without(e.user.id));break;case"message.deleted":e.message&&(e.hard_delete?u.removeMessage(e.message):u.addMessageSorted(e.message),e.message.pinned&&u.removePinnedMessage(e.message));break;case"message.new":if(e.message){var h,d,p,v=(null===(h=e.user)||void 0===h?void 0:h.id)===(null===(d=this.getClient().user)||void 0===d?void 0:d.id),g=e.message.parent_id&&!e.message.show_in_channel;(this.state.isUpToDate||g)&&u.addMessageSorted(e.message,v),e.message.pinned&&u.addPinnedMessage(e.message),v&&null!==(p=e.user)&&void 0!==p&&p.id?(u.unreadCount=0,u.read=u.read.set(e.user.id,S()({user:fe({},e.user),last_read:new Date(e.created_at)}))):this._countMessageAsUnread(e.message)&&(u.unreadCount=u.unreadCount+1)}break;case"message.updated":e.message&&(u.addMessageSorted(e.message),e.message.pinned?u.addPinnedMessage(e.message):u.removePinnedMessage(e.message));break;case"channel.truncated":u.clearMessages(),u.unreadCount=0;break;case"member.added":case"member.updated":var y;if(null!==(o=e.member)&&void 0!==o&&o.user_id)u.members=u.members.set(null===(y=e.member)||void 0===y?void 0:y.user_id,S()(e.member));break;case"member.removed":null!==(a=e.user)&&void 0!==a&&a.id&&(u.members=u.members.without(e.user.id));break;case"channel.updated":e.channel&&(c.data=S()(e.channel));break;case"reaction.new":e.reaction&&u.addReaction(e.reaction,e.message);break;case"reaction.deleted":e.reaction&&u.removeReaction(e.reaction,e.message);break;case"reaction.updated":e.reaction&&u.addReaction(e.reaction,e.message,!0);break;case"channel.hidden":e.clear_history&&u.clearMessages();break}void 0!==e.watcher_count&&(c.state.watcher_count=e.watcher_count)}},{key:"_checkInitialized",value:function(){if(!this.initialized&&!this.getClient()._isUsingServerAuth())throw Error("Channel ".concat(this.cid," hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve"))}},{key:"_initializeState",value:function(e){if(e.members){var t,n=ae(e.members);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.user&&this.getClient().state.updateUserReference(r.user,this.cid)}}catch(b){n.e(b)}finally{n.f()}}this.state.membership=S()(e.membership?e.membership:{});var i=e.messages||[];if(this.state.messages||(this.state.messages=S()([])),this.state.addMessagesSorted(i,!1,!0),this.state.pinnedMessages||(this.state.pinnedMessages=S()([])),this.state.addPinnedMessages(e.pinned_messages||[]),this.state.watcher_count=e.watcher_count?e.watcher_count:0,e.watchers){var s,a=ae(e.watchers);try{for(a.s();!(s=a.n()).done;){var c=s.value;c&&(this.getClient().state.updateUserReference(c,this.cid),this.state.watchers=this.state.watchers.set(c.id,c))}}catch(b){a.e(b)}finally{a.f()}}if(null!=this.getClient().userID){var u=null!=this.state.last_message_at?this.state.last_message_at:new Date,l=this.getClient(),f=l.user;f&&(this.state.read=this.state.read.set(f.id,{user:this.getClient().user,last_read:u}))}if(e.read){var h,d=ae(e.read);try{for(d.s();!(h=d.n()).done;){var p,v=h.value,g=o()(fe({},v));g.last_read=new Date(v.last_read),this.state.read=this.state.read.set(v.user.id,g),v.user.id===(null===(p=this.getClient().user)||void 0===p?void 0:p.id)&&(this.state.unreadCount=g.unread_messages)}}catch(b){d.e(b)}finally{d.f()}}if(e.members){var y,m=ae(e.members);try{for(m.s();!(y=m.n()).done;){var w=y.value;w.user&&(this.state.members=this.state.members.set(w.user.id,w))}}catch(b){m.e(b)}finally{m.f()}}}},{key:"_disconnect",value:function(){this._client.logger("info","channel:disconnect() - Disconnecting the channel ".concat(this.cid),{tags:["connection","channel"],channel:this}),this.disconnected=!0}}]),e}();function de(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=pe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function pe(e,t){if(e){if("string"===typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(){function e(){m()(this,e),_()(this,"users",void 0),_()(this,"userChannelReferences",void 0),this.users=S()({}),this.userChannelReferences={}}return b()(e,[{key:"updateUsers",value:function(e){var t,n=de(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.updateUser(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateUser",value:function(e){null!=e&&(this.users=this.users.set(e.id,S()(e)))}},{key:"updateUserReference",value:function(e,t){null!=e&&(this.updateUser(e),this.userChannelReferences[e.id]||(this.userChannelReferences[e.id]={}),this.userChannelReferences[e.id][t]=!0)}}]),e}(),ye=function(e){return void 0!==e.code},me=function(e){return void 0!==e.error},we=function(){function e(t){var n=this,r=t.apiKey,i=t.authType,s=t.clientID,o=t.eventCallback,a=t.logger,c=t.messageCallback,u=t.recoverCallback,l=t.tokenManager,f=t.user,h=t.userAgent,d=t.userID,p=t.wsBaseURL;m()(this,e),_()(this,"apiKey",void 0),_()(this,"authType",void 0),_()(this,"clientID",void 0),_()(this,"eventCallback",void 0),_()(this,"logger",void 0),_()(this,"messageCallback",void 0),_()(this,"recoverCallback",void 0),_()(this,"tokenManager",void 0),_()(this,"user",void 0),_()(this,"userAgent",void 0),_()(this,"userID",void 0),_()(this,"wsBaseURL",void 0),_()(this,"connectionID",void 0),_()(this,"connectionOpen",void 0),_()(this,"consecutiveFailures",void 0),_()(this,"healthCheckInterval",void 0),_()(this,"healthCheckIntervalRef",void 0),_()(this,"isConnecting",void 0),_()(this,"isHealthy",void 0),_()(this,"isResolved",void 0),_()(this,"lastEvent",void 0),_()(this,"monitorInterval",void 0),_()(this,"monitorIntervalRef",void 0),_()(this,"rejectPromise",void 0),_()(this,"resolvePromise",void 0),_()(this,"totalFailures",void 0),_()(this,"ws",void 0),_()(this,"wsID",void 0),_()(this,"_buildUrl",(function(){var e={user_id:n.user.id,user_details:n.user,user_token:n.tokenManager.getToken(),server_determines_connection_id:!0},t=encodeURIComponent(JSON.stringify(e)),r=n.tokenManager.getToken();return"".concat(n.wsBaseURL,"/connect?json=").concat(t,"&api_key=").concat(n.apiKey,"&authorization=").concat(r,"&stream-auth-type=").concat(n.authType,"&x-stream-client=").concat(n.userAgent)})),_()(this,"onlineStatusChanged",(function(e){"offline"===e.type?(n.logger("info","connection:onlineStatusChanged() - Status changing to offline",{tags:["connection"]}),n._setHealth(!1)):"online"===e.type&&(n.logger("info","connection:onlineStatusChanged() - Status changing to online. isHealthy: ".concat(n.isHealthy),{tags:["connection"]}),n.isHealthy||n._reconnect({interval:10}))})),_()(this,"onopen",(function(e){n.wsID===e&&(n.logger("info","connection:onopen() - onopen callback",{tags:["connection"],wsID:e}),n._setHealth(!0))})),_()(this,"onmessage",(function(e,t){if(n.wsID===e){if(!n.isResolved&&"string"===typeof t.data){var r,i,s=JSON.parse(t.data);if(null!=s.error)return void(null===(r=n.rejectPromise)||void 0===r||r.call(n,n._errorFromWSEvent(s,!1)));null===(i=n.resolvePromise)||void 0===i||i.call(n,t)}n.lastEvent=new Date,n.logger("info","connection:onmessage() - onmessage callback",{tags:["connection"],event:t,wsID:e}),n.messageCallback(t)}})),_()(this,"onclose",(function(e,t){if(n.logger("info","connection:onclose() - onclose callback - "+t.code,{tags:["connection"],event:t,wsID:e}),n.wsID===e)if(t.code===Z.WS_CLOSED_SUCCESS){var r,i=new Error("WS connection reject with error ".concat(t.reason));i.reason=t.reason,null===(r=n.rejectPromise)||void 0===r||r.call(n,i),n.logger("info","connection:onclose() - WS connection reject with error ".concat(t.reason),{tags:["connection"],event:t})}else{var s;n.consecutiveFailures+=1,n.totalFailures+=1,n._setHealth(!1),null===(s=n.rejectPromise)||void 0===s||s.call(n,n._errorFromWSEvent(t)),n.logger("info","connection:onclose() - WS connection closed. Calling reconnect ...",{tags:["connection"],event:t}),n._reconnect()}})),_()(this,"onerror",(function(e,t){var r;n.wsID===e&&(n.consecutiveFailures+=1,n.totalFailures+=1,n._setHealth(!1),null===(r=n.rejectPromise)||void 0===r||r.call(n,n._errorFromWSEvent(t)),n.logger("info","connection:onerror() - WS connection resulted into error",{tags:["connection"],event:t}),n._reconnect())})),_()(this,"_setHealth",(function(e){e&&!n.isHealthy&&(n.isHealthy=!0,n.eventCallback({type:"connection.changed",online:!0})),!e&&n.isHealthy&&(n.isHealthy=!1,setTimeout((function(){n.isHealthy||n.eventCallback({type:"connection.changed",online:!1})}),5e3))})),_()(this,"_errorFromWSEvent",(function(e){var t,r,i,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ye(e)&&(t=e.code,r="unknown",i=e.reason),me(e)&&(t=e.error.code,r=e.error.StatusCode,i=e.error.message),n.logger("warn","connection:_errorFromWSEvent() - WS failed with code ".concat(t),{tags:["connection"],event:e});var o=new Error("WS failed with code ".concat(t," and reason - ").concat(i));return o.code=t,o.StatusCode=r,o.isWSFailure=s,o})),_()(this,"_listenForConnectionChanges",(function(){"undefined"!==typeof window&&null!=window&&null!=window.addEventListener&&(window.addEventListener("offline",n.onlineStatusChanged),window.addEventListener("online",n.onlineStatusChanged))})),_()(this,"_removeConnectionListeners",(function(){"undefined"!==typeof window&&null!=window&&null!=window.addEventListener&&(window.removeEventListener("offline",n.onlineStatusChanged),window.removeEventListener("online",n.onlineStatusChanged))})),_()(this,"_retryInterval",(function(){var e=Math.min(500+2e3*n.consecutiveFailures,25e3),t=Math.min(Math.max(250,2e3*(n.consecutiveFailures-1)),25e3);return Math.floor(Math.random()*(e-t)+t)})),_()(this,"_setupConnectionPromise",(function(){var e=n;n.isResolved=!1,n.connectionOpen=new Promise((function(t,n){e.resolvePromise=t,e.rejectPromise=n})).then((function(e){if(e.data&&"string"===typeof e.data){var t=JSON.parse(e.data);if(t&&null!=t.error)throw new Error(JSON.stringify(t.error));return t}}),(function(e){throw e}))})),this.wsBaseURL=p,this.clientID=s,this.userID=d,this.user=f,this.authType=i,this.userAgent=h,this.apiKey=r,this.tokenManager=l,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isHealthy=!1,this.recoverCallback=u,this.messageCallback=c,this.eventCallback=o,this.logger=a,this.wsID=1,this.lastEvent=null,this.healthCheckInterval=3e4,this.monitorInterval=1e3,this._listenForConnectionChanges()}return b()(e,[{key:"connect",value:function(){var e=g()(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isConnecting){e.next=2;break}throw Error("You've called connect twice, can only attempt 1 connection at the time");case 2:return e.prev=2,this.isConnecting=!0,e.next=6,this._connect();case 6:return t=e.sent,this.isConnecting=!1,this.consecutiveFailures=0,this._startMonitor(),this._startHealthCheck(),this.logger("info","connection:connect() - Established ws connection with healthcheck: ".concat(t),{tags:["connection"]}),e.abrupt("return",t);case 15:if(e.prev=15,e.t0=e["catch"](2),this.isConnecting=!1,this.isHealthy=!1,this.consecutiveFailures+=1,e.t0.code!==Z.TOKEN_EXPIRED||this.tokenManager.isStatic()){e.next=23;break}return this.logger("info","connection:connect() - WS failure due to expired token, so going to try to reload token and reconnect",{tags:["connection"]}),e.abrupt("return",this._reconnect({refreshToken:!0}));case 23:if(e.t0.isWSFailure){e.next=25;break}throw new Error(JSON.stringify({code:e.t0.code,StatusCode:e.t0.StatusCode,message:e.t0.message,isWSFailure:e.t0.isWSFailure}));case 25:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(e){var t,n=this;this.logger("info","connection:disconnect() - Closing the websocket connection for wsID ".concat(this.wsID),{tags:["connection"]}),this.wsID+=1,this.healthCheckIntervalRef&&clearInterval(this.healthCheckIntervalRef),this.monitorIntervalRef&&clearInterval(this.monitorIntervalRef),this._removeConnectionListeners(),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();var r=this.ws;return r&&r.close&&r.readyState===r.OPEN?(t=new Promise((function(t){var i=function(e){n.logger("info","connection:disconnect() - resolving isClosedPromise ".concat(e?"with":"without"," close frame"),{tags:["connection"],event:e}),t()};r.onclose=i,setTimeout(i,null!=e?e:1e3)})),this.logger("info","connection:disconnect() - Manually closed connection by calling client.disconnect()",{tags:["connection"]}),r.close(Z.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this.logger("info","connection:disconnect() - ws connection doesn't exist or it is already closed.",{tags:["connection"]}),t=Promise.resolve()),delete this.ws,t}},{key:"_connect",value:function(){var e=g()(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.tokenManager.tokenReady();case 2:return this._setupConnectionPromise(),t=this._buildUrl(),this.ws=new j.a(t),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID),e.next=11,this.connectionOpen;case 11:if(n=e.sent,!n){e.next=15;break}return this.connectionID=n.connection_id,e.abrupt("return",n);case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_reconnect",value:function(){var e=g()(p.a.mark((function e(){var t,n,r,i=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},this.logger("info","connection:_reconnect() - Initiating the reconnect",{tags:["connection"]}),!this.isConnecting&&!this.isHealthy){e.next=5;break}return this.logger("info","connection:_reconnect() - Abort (1) since already connecting or healthy",{tags:["connection"]}),e.abrupt("return");case 5:return n=t.interval,n||(n=this._retryInterval()),e.next=9,X(n);case 9:if(!this.isConnecting&&!this.isHealthy){e.next=12;break}return this.logger("info","connection:_reconnect() - Abort (2) since already connecting or healthy",{tags:["connection"]}),e.abrupt("return");case 12:if(this.isConnecting=!0,this.logger("info","connection:_reconnect() - Destroying current WS connection",{tags:["connection"]}),this._destroyCurrentWSConnection(),!t.refreshToken){e.next=18;break}return e.next=18,this.tokenManager.loadToken();case 18:return e.prev=18,e.next=21,this._connect();case 21:if(r=e.sent,!this.recoverCallback){e.next=27;break}return this.logger("info","connection:_reconnect() - Waiting for recoverCallBack",{tags:["connection"]}),e.next=26,this.recoverCallback(r);case 26:this.logger("info","connection:_reconnect() - Finished recoverCallBack",{tags:["connection"]});case 27:this.isConnecting=!1,this.consecutiveFailures=0,e.next=40;break;case 31:if(e.prev=31,e.t0=e["catch"](18),this.isConnecting=!1,this.isHealthy=!1,this.consecutiveFailures+=1,e.t0.code!==Z.TOKEN_EXPIRED||this.tokenManager.isStatic()){e.next=39;break}return this.logger("info","connection:_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect",{tags:["connection"]}),e.abrupt("return",this._reconnect({refreshToken:!0}));case 39:e.t0.isWSFailure&&(this.logger("info","connection:_reconnect() - WS failure, so going to try to reconnect",{tags:["connection"]}),this._reconnect());case 40:this.logger("info","connection:_reconnect() - == END ==",{tags:["connection"]});case 41:case"end":return e.stop()}}),e,this,[[18,31]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_destroyCurrentWSConnection",value:function(){this.wsID+=1;try{this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners(),this.ws&&this.ws.close&&this.ws.close()}catch(e){}}},{key:"_startHealthCheck",value:function(){var e=this;this.healthCheckIntervalRef=setInterval((function(){var t=[{type:"health.check",client_id:e.clientID,user_id:e.userID}];try{var n;null===(n=e.ws)||void 0===n||n.send(JSON.stringify(t))}catch(r){}}),e.healthCheckInterval)}},{key:"_startMonitor",value:function(){var e=this,t=this;this.monitorIntervalRef=setInterval((function(){var n=new Date;t.lastEvent&&n.getTime()-t.lastEvent.getTime()>e.healthCheckInterval+1e4&&(e.logger("info","connection:_startMonitor - going to reconnect",{tags:["connection"]}),t._setHealth(!1),t._reconnect())}),t.monitorInterval)}}]),e}(),be=null,xe=null;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof t)throw new TypeError("userId should be a string");ke({user_id:t},n);throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.")}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={server:!0},r=o()({algorithm:"HS256",noTimestamp:!0},t);return be.sign(n,e,r)}function Se(e){var t=e.split(".");if(3!==t.length)return"";var n=t[1],r=D(n),i=JSON.parse(r);return i.user_id}function Re(e){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",L(JSON.stringify({user_id:e})),"devtoken"].join(".")}function Oe(t,n,r){var i=e.from(n,"ascii"),s=xe.createHmac("sha256",i).update(t).digest("hex");return s===r}var Ue=function e(t){var n=this;m()(this,e),_()(this,"loadTokenPromise",void 0),_()(this,"type",void 0),_()(this,"secret",void 0),_()(this,"token",void 0),_()(this,"tokenProvider",void 0),_()(this,"user",void 0),_()(this,"setTokenOrProvider",function(){var e=g()(p.a.mark((function e(t,r){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.validateToken(t,r),n.user=r,Q(t)&&(n.tokenProvider=t,n.type="provider"),"string"===typeof t&&(n.token=t,n.type="static"),!t&&n.user&&n.secret&&(n.token=Ee(n.secret,r.id,{},{}),n.type="static"),e.next=7,n.loadToken();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_()(this,"reset",(function(){n.token=void 0,n.user=void 0,n.loadTokenPromise=null})),_()(this,"validateToken",(function(e,t){if(!t||!t.anon||e){if(!n.secret&&!e)throw new Error("User token can not be empty");if(e&&"string"!==typeof e&&!Q(e))throw new Error("user token should either be a string or a function");if("string"===typeof e){if(t.anon&&""===e)return;var r=Se(e);if(null!=e&&(null==r||""===r||r!==t.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}})),_()(this,"tokenReady",(function(){return n.loadTokenPromise})),_()(this,"loadToken",(function(){return n.loadTokenPromise=new Promise(function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("static"!==n.type){e.next=2;break}return e.abrupt("return",t(n.token));case 2:if(!n.tokenProvider||"string"===typeof n.tokenProvider){e.next=7;break}return e.next=5,n.tokenProvider();case 5:n.token=e.sent,t(n.token);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.loadTokenPromise})),_()(this,"getToken",(function(){if(n.token)return n.token;if(n.user&&n.user.anon&&!n.token)return n.token;if(n.secret)return Ce(n.secret);throw new Error("Both secret and user tokens are not set. Either client.setUser wasn't called or client.disconnect was called")})),_()(this,"isStatic",(function(){return"static"===n.type})),this.loadTokenPromise=null,t&&(this.secret=t),this.type="static",this.secret&&(this.token=Ce(this.secret))};function Ae(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Pe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Pe(e,t){if(e){if("string"===typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){return"string"===typeof e||e instanceof String}var Le=function(){function t(e,n,i){var s=this;m()(this,t),_()(this,"_user",void 0),_()(this,"activeChannels",void 0),_()(this,"anonymous",void 0),_()(this,"axiosInstance",void 0),_()(this,"baseURL",void 0),_()(this,"browser",void 0),_()(this,"cleaningIntervalRef",void 0),_()(this,"clientID",void 0),_()(this,"configs",void 0),_()(this,"connecting",void 0),_()(this,"connectionEstablishedCount",void 0),_()(this,"connectionID",void 0),_()(this,"failures",void 0),_()(this,"key",void 0),_()(this,"listeners",void 0),_()(this,"logger",void 0),_()(this,"recoverStateOnReconnect",void 0),_()(this,"mutedChannels",void 0),_()(this,"mutedUsers",void 0),_()(this,"node",void 0),_()(this,"options",void 0),_()(this,"secret",void 0),_()(this,"setUserPromise",void 0),_()(this,"state",void 0),_()(this,"tokenManager",void 0),_()(this,"user",void 0),_()(this,"userAgent",void 0),_()(this,"userID",void 0),_()(this,"wsBaseURL",void 0),_()(this,"wsConnection",void 0),_()(this,"wsPromise",void 0),_()(this,"_setupConnection",(function(){return s.clientID="".concat(s.userID,"--").concat(oe()),s.wsPromise=s.connect(),s._startCleaning(),s.wsPromise})),_()(this,"_hasConnectionID",(function(){return Boolean(s.connectionID)})),_()(this,"connectUser",(function(e,t){if(s.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");if(!s._isUsingServerAuth()&&!s.node||s.options.allowServerSideConnect||console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.userID=e.id,!s.userID)throw new Error('The "id" field on the user is missing');var n=s._setToken(e,t);s._setUser(e);var r=s._setupConnection();return s.anonymous=!1,s.setUserPromise=Promise.all([n,r]).then((function(e){return e[1]})).catch((function(e){throw e})),s.setUserPromise})),_()(this,"setUser",(function(e,t){return s.connectUser(e,t)})),_()(this,"_setToken",(function(e,t){return s.tokenManager.setTokenOrProvider(t,e)})),_()(this,"connectAnonymousUser",(function(){!s._isUsingServerAuth()&&!s.node||s.options.allowServerSideConnect||console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),s.anonymous=!0,s.userID=oe();var e={id:s.userID,anon:!0};return s._setToken(e,""),s._setUser(e),s._setupConnection()})),_()(this,"setAnonymousUser",(function(){return s.connectAnonymousUser()})),_()(this,"doAxiosRequest",function(){var e=g()(p.a.mark((function e(t,n,r){var i,o,a,c=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:{},e.next=3,s.tokenManager.tokenReady();case 3:o=s._enrichAxiosOptions(i),e.prev=4,s._logApiRequest(t,n,r,o),e.t0=t,e.next="get"===e.t0?9:"delete"===e.t0?13:"post"===e.t0?17:"put"===e.t0?21:"patch"===e.t0?25:"options"===e.t0?29:33;break;case 9:return e.next=11,s.axiosInstance.get(n,o);case 11:return a=e.sent,e.abrupt("break",34);case 13:return e.next=15,s.axiosInstance.delete(n,o);case 15:return a=e.sent,e.abrupt("break",34);case 17:return e.next=19,s.axiosInstance.post(n,r,o);case 19:return a=e.sent,e.abrupt("break",34);case 21:return e.next=23,s.axiosInstance.put(n,r,o);case 23:return a=e.sent,e.abrupt("break",34);case 25:return e.next=27,s.axiosInstance.patch(n,r,o);case 27:return a=e.sent,e.abrupt("break",34);case 29:return e.next=31,s.axiosInstance.options(n,o);case 31:return a=e.sent,e.abrupt("break",34);case 33:throw new Error("Invalid request type");case 34:return s._logApiResponse(t,n,a),e.abrupt("return",s.handleResponse(a));case 38:if(e.prev=38,e.t1=e["catch"](4),s._logApiError(t,n,e.t1),!e.t1.response){e.next=50;break}if(e.t1.response.data.code!==Z.TOKEN_EXPIRED||s.tokenManager.isStatic()){e.next=47;break}return s.tokenManager.loadToken(),e.next=46,s.doAxiosRequest(t,n,r,i);case 46:return e.abrupt("return",e.sent);case 47:return e.abrupt("return",s.handleResponse(e.t1.response));case 50:throw e.t1;case 51:case"end":return e.stop()}}),e,null,[[4,38]])})));return function(t,n,r){return e.apply(this,arguments)}}()),_()(this,"dispatchEvent",(function(e){s._handleClientEvent(e);var t=e.cid,n=t?s.activeChannels[t]:void 0;n&&n._handleChannelEvent(e),s._callClientListeners(e),n&&n._callChannelListeners(e)})),_()(this,"handleEvent",(function(e){var t=e.data,n=JSON.parse(t);n.received_at=new Date,s.dispatchEvent(n)})),_()(this,"_callClientListeners",(function(e){var t=s,n=[];t.listeners.all&&n.push.apply(n,h()(t.listeners.all)),t.listeners[e.type]&&n.push.apply(n,h()(t.listeners[e.type]));for(var r=0,i=n;r<i.length;r++){var o=i[r];o(e)}})),_()(this,"recoverState",g()(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.logger("info","client:recoverState() - Start of recoverState with connectionID ".concat(null===(t=s.wsConnection)||void 0===t?void 0:t.connectionID),{tags:["connection"]}),s.connectionID=null===(n=s.wsConnection)||void 0===n?void 0:n.connectionID,r=Object.keys(s.activeChannels),!r.length||!s.recoverStateOnReconnect){e.next=11;break}return s.logger("info","client:recoverState() - Start the querying of ".concat(r.length," channels"),{tags:["connection","client"]}),e.next=7,s.queryChannels({cid:{$in:r}},{last_message_at:-1},{limit:30});case 7:s.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),s.dispatchEvent({type:"connection.recovered"}),e.next=12;break;case 11:s.dispatchEvent({type:"connection.recovered"});case 12:s.wsPromise=Promise.resolve(),s.setUserPromise=Promise.resolve();case 14:case"end":return e.stop()}}),e)})))),_()(this,"getChannelByMembers",(function(e,t){var n=h()(t.members||[]).sort().join(","),r="".concat(e,":!members-").concat(n);if(!n)throw Error("Please specify atleast one member when creating unique conversation");for(var i in s.activeChannels){var o=s.activeChannels[i];if(i===r)return o;if(0===i.indexOf("".concat(e,":!members-"))){var a=Object.keys(o.state.members).sort().join(",");if(a===n)return o}}var c=new he(s,e,void 0,t);return s.activeChannels[r]=c,c})),_()(this,"getChannelById",(function(e,t,n){if("string"===typeof t&&~t.indexOf(":"))throw Error("Invalid channel id ".concat(t,", can't contain the : character"));var r="".concat(e,":").concat(t);if(r in s.activeChannels){var i=s.activeChannels[r];return Object.keys(n).length>0&&(i.data=n,i._data=n),i}var o=new he(s,e,t,n);return s.activeChannels[o.cid]=o,o})),_()(this,"_isUsingServerAuth",(function(){return!!s.secret})),this.key=e,this.listeners={},this.state=new ge,this.mutedChannels=[],this.mutedUsers=[],n&&Me(n)&&(this.secret=n);var o=i||(n&&!Me(n)?n:{});this.browser="undefined"!==typeof o.browser?o.browser:"undefined"!==typeof window,this.node=!this.browser,this.options=Ie({timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0},o),this.node&&(this.options.httpsAgent=new B.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=E.a.create(this.options),this.setBaseURL("https://chat-us-east-1.stream-io-api.com"),"undefined"!==typeof r&&Object({NODE_ENV:"production",BASE_URL:"/"}).STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),"undefined"!==typeof r&&Object({NODE_ENV:"production",BASE_URL:"/"}).STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+Object({NODE_ENV:"production",BASE_URL:"/"}).STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.tokenManager=new Ue(this.secret),this.logger=Q(o.logger)?o.logger:function(){return null},this.recoverStateOnReconnect=this.options.recoverStateOnReconnect}return b()(t,[{key:"devToken",value:function(e){return Re(e)}},{key:"getAuthType",value:function(){return this.anonymous?"anonymous":"jwt"}},{key:"setBaseURL",value:function(e){this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws")}},{key:"_setUser",value:function(e){this.user=e,this._user=Ie({},e)}},{key:"updateAppSettings",value:function(){var t=g()(p.a.mark((function t(n){var r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return null!==(r=n.apn_config)&&void 0!==r&&r.p12_cert&&(n.apn_config.p12_cert=e.from(n.apn_config.p12_cert).toString("base64")),t.next=3,this.patch(this.baseURL+"/app",n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getAppSettings",value:function(){var e=g()(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseURL+"/app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"testPushSettings",value:function(){var e=g()(p.a.mark((function e(t){var n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.post(this.baseURL+"/check_push",Ie(Ie(Ie(Ie(Ie({user_id:t},n.messageID?{message_id:n.messageID}:{}),n.apnTemplate?{apn_template:n.apnTemplate}:{}),n.firebaseTemplate?{firebase_template:n.firebaseTemplate}:{}),n.firebaseDataTemplate?{firebase_data_template:n.firebaseDataTemplate}:{}),n.skipDevices?{skip_devices:!0}:{}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"testSQSSettings",value:function(){var e=g()(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.post(this.baseURL+"/check_sqs",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(e){this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,null!=this.cleaningIntervalRef&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),this.anonymous=!1,this.connectionEstablishedCount=0;for(var t=0,n=Object.values(this.activeChannels);t<n.length;t++){var r=n[t];r._disconnect()}return this.activeChannels={},this.state=new ge,this.tokenManager.reset(),this.wsConnection?this.wsConnection.disconnect(e):Promise.resolve()}},{key:"setGuestUser",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.anonymous=!0,e.prev=1,e.next=4,this.post(this.baseURL+"/guest",{user:t});case 4:n=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),this.anonymous=!1,e.t0;case 11:return this.anonymous=!1,r=n.user,r.created_at,r.updated_at,r.last_active,r.online,i=l()(r,["created_at","updated_at","last_active","online"]),e.next=15,this.connectUser(i,n.access_token);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createToken",value:function(e,t){if(null==this.secret)throw Error("tokens can only be created server-side using the API Secret");var n={};return t&&(n.exp=t),Ee(this.secret,e,n,{})}},{key:"on",value:function(e,t){var n=this,r=t?e:"all",i=W(r);if(!i)throw Error("Invalid event type ".concat(r));var s=t||e;return r in this.listeners||(this.listeners[r]=[]),this.logger("info","Attaching listener for ".concat(r," event"),{tags:["event","client"]}),this.listeners[r].push(s),{unsubscribe:function(){n.listeners[r]=n.listeners[r].filter((function(e){return e!==s}))}}}},{key:"off",value:function(e,t){var n=t?e:"all",r=W(n);if(!r)throw Error("Invalid event type ".concat(n));var i=t||e;n in this.listeners||(this.listeners[n]=[]),this.logger("info","Removing listener for ".concat(n," event"),{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter((function(e){return e!==i}))}},{key:"_logApiRequest",value:function(e,t,n,r){this.logger("info","client: ".concat(e," - Request - ").concat(t),{tags:["api","api_request","client"],url:t,payload:n,config:r})}},{key:"_logApiResponse",value:function(e,t,n){this.logger("info","client:".concat(e," - Response - url: ").concat(t," > status ").concat(n.status),{tags:["api","api_response","client"],url:t,response:n})}},{key:"_logApiError",value:function(e,t,n){this.logger("error","client:".concat(e," - Error - url: ").concat(t),{tags:["api","api_response","client"],url:t,error:n})}},{key:"get",value:function(e,t){return this.doAxiosRequest("get",e,null,{params:t})}},{key:"put",value:function(e,t){return this.doAxiosRequest("put",e,t)}},{key:"post",value:function(e,t){return this.doAxiosRequest("post",e,t)}},{key:"patch",value:function(e,t){return this.doAxiosRequest("patch",e,t)}},{key:"delete",value:function(e,t){return this.doAxiosRequest("delete",e,null,{params:t})}},{key:"sendFile",value:function(e,t,n,r,i){var s=re(t,n,r);return null!=i&&s.append("user",JSON.stringify(i)),this.doAxiosRequest("post",e,s,{headers:s.getHeaders?s.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}},{key:"errorFromResponse",value:function(e){var t;return t=new Error("StreamChat error HTTP code: ".concat(e.status)),e.data&&e.data.code&&(t=new Error("StreamChat error code ".concat(e.data.code,": ").concat(e.data.message)),t.code=e.data.code),t.response=e,t.status=e.status,t}},{key:"handleResponse",value:function(e){var t=e.data;if("2"!==(e.status+"")[0])throw this.errorFromResponse(e);return t}},{key:"_handleClientEvent",value:function(e){var t,n,r,i=this;(this.logger("info","client:_handleClientEvent - Received event of type { ".concat(e.type," }"),{tags:["event","client"],event:e}),!e.user||"user.presence.changed"!==e.type&&"user.updated"!==e.type)||((null===(r=e.user)||void 0===r?void 0:r.id)===this.userID&&(this.user=this.user&&Ie(Ie({},this.user),e.user),Object.keys(e.user).forEach((function(t){i._user&&t in i._user&&(i._user[t]=e.user[t])}))),i.state.updateUser(e.user),i._updateUserReferences(e.user));"health.check"===e.type&&e.me&&(i.user=e.me,i.state.updateUser(e.me),i.mutedChannels=e.me.channel_mutes,i.mutedUsers=e.me.mutes),e.channel&&"notification.message_new"===e.type&&(this.configs[e.channel.type]=e.channel.config),"notification.channel_mutes_updated"===e.type&&null!==(t=e.me)&&void 0!==t&&t.channel_mutes&&(this.mutedChannels=e.me.channel_mutes),"notification.mutes_updated"===e.type&&null!==(n=e.me)&&void 0!==n&&n.mutes&&(this.mutedUsers=e.me.mutes)}},{key:"_muteStatus",value:function(e){var t;return this.mutedChannels.forEach((function(n){var r;if((null===(r=n.channel)||void 0===r?void 0:r.cid)===e){var i=!0;n.expires&&(i=new Date(n.expires).getTime()>(new Date).getTime()),t={muted:i,createdAt:n.created_at?new Date(n.created_at):new Date,expiresAt:n.expires?new Date(n.expires):null}}})),t||{muted:!1,createdAt:null,expiresAt:null}}},{key:"_updateUserReferences",value:function(e){for(var t=this.state.userChannelReferences[e.id]||{},n=Object.keys(t),r=0,i=n;r<i.length;r++){var s=i[r],o=this.activeChannels[s];o&&o.state&&(o.state.members[e.id]&&(o.state.members=o.state.members.setIn([e.id,"user"],e)),o.state.watchers[e.id]&&(o.state.watchers=o.state.watchers.setIn([e.id,"user"],e)))}}},{key:"connect",value:function(){var e=g()(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.connecting=!0,t=this,this.failures=0,null!=t.userID&&null!=this._user){e.next=5;break}throw Error("Call connectUser or connectAnonymousUser before starting the connection");case 5:if(null!=t.wsBaseURL){e.next=7;break}throw Error("Websocket base url not set");case 7:if(null!=t.clientID){e.next=9;break}throw Error("clientID is not set");case 9:return this.wsConnection=new we({wsBaseURL:t.wsBaseURL,clientID:t.clientID,userID:t.userID,tokenManager:t.tokenManager,user:this._user,authType:this.getAuthType(),userAgent:this.getUserAgent(),apiKey:this.key,recoverCallback:this.recoverState,messageCallback:this.handleEvent,eventCallback:this.dispatchEvent,logger:this.logger}),this.options.warmUp&&(n=this.doAxiosRequest("options",this.baseURL+"/connect")),e.next=13,this.wsConnection.connect();case 13:return r=e.sent,e.prev=14,e.next=17,n;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](14),this.logger("error","Warmup request failed",{error:e.t0});case 22:return this.connectionID=this.wsConnection.connectionID,e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this,[[14,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryUsers",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i,s,o=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:[],r=o.length>2&&void 0!==o[2]?o[2]:{},i={presence:!1},e.next=5,this.setUserPromise;case 5:return this._hasConnectionID()||(i.presence=!1),e.next=8,this.get(this.baseURL+"/users",{payload:Ie(Ie({filter_conditions:t,sort:ie(n)},i),r)});case 8:return s=e.sent,this.state.updateUsers(s.users),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryChannels",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i,s,o,a,c,u,l,f,h,d,v,g=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]?g[1]:[],r=g.length>2&&void 0!==g[2]?g[2]:{},i={state:!0,watch:!0,presence:!1},e.next=5,this.setUserPromise;case 5:return this._hasConnectionID()||(i.watch=!1),s=Ie(Ie({filter_conditions:t,sort:ie(n)},i),r),e.next=9,this.post(this.baseURL+"/channels",s);case 9:o=e.sent,a=[],c=Ae(o.channels);try{for(c.s();!(u=c.n()).done;)l=u.value,this._addChannelConfig(l)}catch(p){c.e(p)}finally{c.f()}f=Ae(o.channels);try{for(f.s();!(h=f.n()).done;)d=h.value,v=this.channel(d.channel.type,d.channel.id),v.data=d.channel,v.initialized=!0,v._initializeState(d),a.push(v)}catch(p){f.e(p)}finally{f.f()}return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=g()(p.a.mark((function e(t,n){var r,i,s=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:{},i=Ie({filter_conditions:t},r),"string"!==typeof n){e.next=6;break}i.query=n,e.next=11;break;case 6:if("object"!==c()(n)){e.next=10;break}i.message_filter_conditions=n,e.next=11;break;case 10:throw Error("Invalid type ".concat(c()(n)," for query parameter"));case 11:return e.next=13,this.setUserPromise;case 13:return e.next=15,this.get(this.baseURL+"/search",{payload:i});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"addDevice",value:function(){var e=g()(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseURL+"/devices",Ie({id:t,push_provider:n},null!=r?{user_id:r}:{}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getDevices",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseURL+"/devices",t?{user_id:t}:{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeDevice",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseURL+"/devices",Ie({id:t},n?{user_id:n}:{}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_addChannelConfig",value:function(e){this.configs[e.channel.type]=e.channel.config}},{key:"channel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~e.indexOf(":"))throw Error("Invalid channel group ".concat(e,", can't contain the : character"));return null==t||""===t?new he(this,e,void 0,n):"object"===c()(t)?this.getChannelByMembers(e,t):this.getChannelById(e,t,n)}},{key:"updateUser",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.upsertUsers([t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"partialUpdateUser",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.partialUpdateUsers([t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"upsertUsers",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={},r=Ae(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=11;break}if(s=i.value,s.id){e.next=8;break}throw Error("User ID is required when updating a user");case 8:n[s.id]=s;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.next=21,this.post(this.baseURL+"/users",{users:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"upsertUser",value:function(e){return this.upsertUsers([e])}},{key:"updateUsers",value:function(e){return this.upsertUsers(e)}},{key:"partialUpdateUsers",value:function(){var e=g()(p.a.mark((function e(t){var n,r,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ae(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}if(i=r.value,i.id){e.next=7;break}throw Error("User ID is required when updating a user");case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:return e.next=19,this.patch(this.baseURL+"/users",{users:t});case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseURL+"/users/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reactivateUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseURL+"/users/".concat(t,"/reactivate"),Ie({},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deactivateUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseURL+"/users/".concat(t,"/deactivate"),Ie({},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"exportUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseURL+"/users/".concat(t,"/export"),Ie({},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"banUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return void 0!==(null===n||void 0===n?void 0:n.user_id)&&(n.banned_by_id=n.user_id,delete n.user_id,console.warn("banUser: 'user_id' is deprecated, please consider switching to 'banned_by_id'")),void 0!==(null===n||void 0===n?void 0:n.user)&&(n.banned_by=n.user,delete n.user,console.warn("banUser: 'user' is deprecated, please consider switching to 'banned_by'")),e.next=4,this.post(this.baseURL+"/moderation/ban",Ie({target_user_id:t},n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unbanUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.delete(this.baseURL+"/moderation/ban",Ie({target_user_id:t},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"shadowBan",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.banUser(t,Ie({shadow:!0},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeShadowBan",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unbanUser(t,Ie({shadow:!0},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"muteUser",value:function(){var e=g()(p.a.mark((function e(t,n){var r,i=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,this.post(this.baseURL+"/moderation/mute",Ie(Ie({target_id:t},n?{user_id:n}:{}),r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteUser",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseURL+"/moderation/unmute",Ie({target_id:t},n?{user_id:n}:{}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"userMuteStatus",value:function(e){if(!this.user||!this.wsPromise)throw new Error("Make sure to await setUser() first.");for(var t=0;t<this.mutedUsers.length;t+=1)if(this.mutedUsers[t].target.id===e)return!0;return!1}},{key:"flagMessage",value:function(){var e=g()(p.a.mark((function e(t){var n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.post(this.baseURL+"/moderation/flag",Ie({target_message_id:t},n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"flagUser",value:function(){var e=g()(p.a.mark((function e(t){var n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.post(this.baseURL+"/moderation/flag",Ie({target_user_id:t},n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unflagMessage",value:function(){var e=g()(p.a.mark((function e(t){var n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.post(this.baseURL+"/moderation/unflag",Ie({target_message_id:t},n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unflagUser",value:function(){var e=g()(p.a.mark((function e(t){var n,r=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.post(this.baseURL+"/moderation/unflag",Ie({target_user_id:t},n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"markAllRead",value:function(){var e=g()(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.post(this.baseURL+"/channels/read",Ie({},t));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createCommand",value:function(e){return this.post(this.baseURL+"/commands",e)}},{key:"getCommand",value:function(e){return this.get(this.baseURL+"/commands/".concat(e))}},{key:"updateCommand",value:function(e,t){return this.put(this.baseURL+"/commands/".concat(e),t)}},{key:"deleteCommand",value:function(e){return this.delete(this.baseURL+"/commands/".concat(e))}},{key:"listCommands",value:function(){return this.get(this.baseURL+"/commands")}},{key:"createChannelType",value:function(e){var t=o()({},{commands:["all"]},e);return this.post(this.baseURL+"/channeltypes",t)}},{key:"getChannelType",value:function(e){return this.get(this.baseURL+"/channeltypes/".concat(e))}},{key:"updateChannelType",value:function(e,t){return this.put(this.baseURL+"/channeltypes/".concat(e),t)}},{key:"deleteChannelType",value:function(e){return this.delete(this.baseURL+"/channeltypes/".concat(e))}},{key:"listChannelTypes",value:function(){return this.get(this.baseURL+"/channeltypes")}},{key:"translateMessage",value:function(){var e=g()(p.a.mark((function e(t,n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.post(this.baseURL+"/messages/".concat(t,"/translate"),{language:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"pinMessage",value:function(e,t){var n;if("number"===typeof t){var r=new Date;r.setSeconds(r.getSeconds()+t),n=r.toISOString()}else Me(t)?n=t:t instanceof Date&&(n=t.toISOString());return this.updateMessage(Ie(Ie({},e),{},{pinned:!0,pin_expires:n}))}},{key:"unpinMessage",value:function(e){return this.updateMessage(Ie(Ie({},e),{},{pinned:!1}))}},{key:"updateMessage",value:function(){var e=g()(p.a.mark((function e(t,n){var r,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw Error("Please specify the message id when calling updateMessage");case 2:return r=o()({},t),delete r.id,i=["command","created_at","html","latest_reactions","own_reactions","reaction_counts","reply_count","type","updated_at","user"],i.forEach((function(e){null!=r[e]&&delete r[e]})),null!=n&&(Me(n)?r.user_id=n:r.user={id:n.id}),e.next=9,this.post(this.baseURL+"/messages/".concat(t.id),{message:r});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteMessage",value:function(){var e=g()(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},n&&(r={hard:!0}),e.next=4,this.delete(this.baseURL+"/messages/".concat(t),r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getMessage",value:function(){var e=g()(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.baseURL+"/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_userAgent",value:function(){return this.getUserAgent()}},{key:"getUserAgent",value:function(){return this.userAgent||"stream-chat-javascript-client-".concat(this.node?"node":"browser","-","2.11.5")}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"_enrichAxiosOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}},t=this._getToken();return Ie({params:Ie(Ie({user_id:this.userID},e.params),{},{api_key:this.key,connection_id:this.connectionID}),headers:Ie({Authorization:t,"stream-auth-type":this.getAuthType(),"x-stream-client":this._userAgent()},e.headers)},e.config)}},{key:"_getToken",value:function(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}},{key:"_startCleaning",value:function(){var e=this;null==this.cleaningIntervalRef&&(this.cleaningIntervalRef=setInterval((function(){for(var t=0,n=Object.values(e.activeChannels);t<n.length;t++){var r=n[t];r.clean()}}),500))}},{key:"verifyWebhook",value:function(e,t){return!!this.secret&&Oe(e,this.secret,t)}},{key:"getPermission",value:function(e){return this.get("".concat(this.baseURL,"/custom_permission/").concat(e))}},{key:"createPermission",value:function(e){return this.post("".concat(this.baseURL,"/custom_permission"),Ie({},e))}},{key:"updatePermission",value:function(e,t){return this.post("".concat(this.baseURL,"/custom_permission/").concat(e),Ie({},t))}},{key:"deletePermission",value:function(e){return this.delete("".concat(this.baseURL,"/custom_permission/").concat(e))}},{key:"listPermissions",value:function(){return this.get("".concat(this.baseURL,"/custom_permission"))}},{key:"createRole",value:function(e){return this.post("".concat(this.baseURL,"/custom_role"),{name:e})}},{key:"listRoles",value:function(){return this.get("".concat(this.baseURL,"/custom_role"))}},{key:"deleteRole",value:function(e){return this.delete("".concat(this.baseURL,"/custom_role/").concat(e))}},{key:"sync",value:function(e,t){return this.post("".concat(this.baseURL,"/sync"),{channel_cids:e,last_sync_at:t})}},{key:"createBlockList",value:function(e){return this.post("".concat(this.baseURL,"/blocklists"),e)}},{key:"listBlockLists",value:function(){return this.get("".concat(this.baseURL,"/blocklists"))}},{key:"getBlockList",value:function(e){return this.get("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"updateBlockList",value:function(e,t){return this.put("".concat(this.baseURL,"/blocklists/").concat(e),t)}},{key:"deleteBlockList",value:function(e){return this.delete("".concat(this.baseURL,"/blocklists/").concat(e))}},{key:"exportChannels",value:function(e){var t={channels:e};return this.post("".concat(this.baseURL,"/export_channels"),t)}},{key:"exportChannel",value:function(e){return this.exportChannels([e])}},{key:"getExportChannelStatus",value:function(e){return this.get("".concat(this.baseURL,"/export_channels/").concat(e))}}]),t}(),De="Allow",Be="Deny",Ne=["*"],Fe=["*"],$e=999,Ye=1,ze=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ne,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fe,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:De;m()(this,e),_()(this,"name",void 0),_()(this,"action",void 0),_()(this,"owner",void 0),_()(this,"priority",void 0),_()(this,"resources",void 0),_()(this,"roles",void 0),this.name=t,this.action=o,this.owner=s,this.priority=n,this.resources=r,this.roles=i};new ze("Allow all",$e,Ne,Fe,!1,De),new ze("Deny all",Ye,Ne,Fe,!1,Be)}).call(this,n("b639").Buffer,n("4362"))},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),s=n("825a"),o=n("df75");e.exports=r?Object.defineProperties:function(e,t){s(e);var n,r=o(t),a=r.length,c=0;while(a>c)i.f(e,n=r[c++],t[n]);return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},3934:function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("69f3"),s=n("7dd0"),o="String Iterator",a=i.set,c=i.getterFor(o);s(String,"String",(function(e){a(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},"3fe3":function(e,t,n){(function(t){var n=null;"undefined"!==typeof WebSocket?n=WebSocket:"undefined"!==typeof MozWebSocket?n=MozWebSocket:"undefined"!==typeof t?n=t.WebSocket||t.MozWebSocket:"undefined"!==typeof window?n=window.WebSocket||window.MozWebSocket:"undefined"!==typeof self&&(n=self.WebSocket||self.MozWebSocket),e.exports=n}).call(this,n("c8ba"))},4082:function(e,t,n){n("a4d3"),n("c975");var r=n("f0e4");function i(e,t){if(null==e)return{};var n,i,s=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}e.exports=i},4160:function(e,t,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(e,t,n){var r=n("da84");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"448a":function(e,t,n){var r=n("2236"),i=n("11b0"),s=n("6613"),o=n("0676");function a(e){return r(e)||i(e)||s(e)||o()}e.exports=a},"44ad":function(e,t,n){var r=n("d039"),i=n("c6b6"),s="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),s=n("9bf2"),o=r("unscopables"),a=Array.prototype;void 0==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),s=n("b622"),o=s("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"467f":function(e,t,n){"use strict";var r=n("2d83");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},4840:function(e,t,n){var r=n("825a"),i=n("1c0b"),s=n("b622"),o=s("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},4930:function(e,t,n){var r=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,s=n("c8d2");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},"4a7b":function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(s,u),r.forEach(o,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(a,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=i.concat(s).concat(o).concat(a),f=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(f,u),n}},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),s=n("94ca"),o=n("7156"),a=n("9bf2").f,c=n("241c").f,u=n("44e7"),l=n("ad6d"),f=n("9f7f"),h=n("6eeb"),d=n("d039"),p=n("69f3").set,v=n("2626"),g=n("b622"),y=g("match"),m=i.RegExp,w=m.prototype,b=/a/g,x=/a/g,_=new m(b)!==b,k=f.UNSUPPORTED_Y,E=r&&s("RegExp",!_||k||d((function(){return x[y]=!1,m(b)!=b||m(x)==x||"/a/i"!=m(b,"i")})));if(E){var C=function(e,t){var n,r=this instanceof C,i=u(e),s=void 0===t;if(!r&&i&&e.constructor===C&&s)return e;_?i&&!s&&(e=e.source):e instanceof C&&(s&&(t=l.call(e)),e=e.source),k&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var a=o(_?new m(e,t):m(e,t),r?this:w,C);return k&&n&&p(a,{sticky:n}),a},S=function(e){e in C||a(C,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},R=c(m),O=0;while(R.length>O)S(R[O++]);w.constructor=C,C.prototype=w,h(i,"RegExp",C)}v("RegExp")},"4d64":function(e,t,n){var r=n("fc6a"),i=n("50c4"),s=n("23cb"),o=function(e){return function(t,n,o){var a,c=r(t),u=i(c.length),l=s(o,u);if(e&&n!=n){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,s=n("1dde"),o=n("ae40"),a=s("filter"),c=o("filter");r({target:"Array",proto:!0,forced:!a||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),s=n("9bdd"),o=n("e95a"),a=n("50c4"),c=n("8418"),u=n("35a1");e.exports=function(e){var t,n,l,f,h,d,p=i(e),v="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,m=void 0!==y,w=u(p),b=0;if(m&&(y=r(y,g>2?arguments[2]:void 0,2)),void 0==w||v==Array&&o(w))for(t=a(p.length),n=new v(t);t>b;b++)d=m?y(p[b],b):p[b],c(n,b,d);else for(f=w.call(p),h=f.next,n=new v;!(l=h.call(f)).done;b++)d=m?s(f,y,[l.value,b],!0):l.value,c(n,b,d);return n.length=b,n}},"50c4":function(e,t,n){var r=n("a691"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},5135:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},5270:function(e,t,n){"use strict";var r=n("c532"),i=n("c401"),s=n("2e67"),o=n("2444");function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||o.adapter;return t(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),s=n("50c4"),o=n("a691"),a=n("1d80"),c=n("8aa5"),u=n("0cb2"),l=n("14c3"),f=Math.max,h=Math.min,d=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,r){var i=a(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!p&&v||"string"===typeof r&&-1===r.indexOf(g)){var a=n(t,e,this,r);if(a.done)return a.value}var y=i(e),m=String(this),w="function"===typeof r;w||(r=String(r));var b=y.global;if(b){var x=y.unicode;y.lastIndex=0}var _=[];while(1){var k=l(y,m);if(null===k)break;if(_.push(k),!b)break;var E=String(k[0]);""===E&&(y.lastIndex=c(m,s(y.lastIndex),x))}for(var C="",S=0,R=0;R<_.length;R++){k=_[R];for(var O=String(k[0]),U=f(h(o(k.index),m.length),0),A=[],P=1;P<k.length;P++)A.push(d(k[P]));var j=k.groups;if(w){var T=[O].concat(A,U,m);void 0!==j&&T.push(j);var I=String(r.apply(void 0,T))}else I=u(O,m,U,A,j,r);U>=S&&(C+=m.slice(S,U)+I,S=U+O.length)}return C+m.slice(S)}]}))},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),i=n("241c"),s=n("7418"),o=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=s.f;return n?t.concat(n(e)):t}},5899:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("5899"),s="["+i+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5a43":function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=n},"5bc3":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=r},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5f02":function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("d039"),s=n("df75"),o=n("7418"),a=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,f=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||s(l({},t)).join("")!=i}))?function(e,t){var n=c(e),i=arguments.length,l=1,f=o.f,h=a.f;while(i>l){var d,p=u(arguments[l++]),v=f?s(p).concat(f(p)):s(p),g=v.length,y=0;while(g>y)d=v[y++],r&&!h.call(p,d)||(n[d]=p[d])}return n}:l},6547:function(e,t,n){var r=n("a691"),i=n("1d80"),s=function(e){return function(t,n){var s,o,a=String(i(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(s=a.charCodeAt(c),s<55296||s>56319||c+1===u||(o=a.charCodeAt(c+1))<56320||o>57343?e?a.charAt(c):s:e?a.slice(c,c+2):o-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},"65f0":function(e,t,n){var r=n("861d"),i=n("e8b5"),s=n("b622"),o=s("species");e.exports=function(e,t){var n;return i(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},6613:function(e,t,n){n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var r=n("5a43");function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=i},"69f3":function(e,t,n){var r,i,s,o=n("7f9a"),a=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),f=n("c6cd"),h=n("f772"),d=n("d012"),p=a.WeakMap,v=function(e){return s(e)?i(e):r(e,{})},g=function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(o){var y=f.state||(f.state=new p),m=y.get,w=y.has,b=y.set;r=function(e,t){return t.facade=e,b.call(y,e,t),t},i=function(e){return m.call(y,e)||{}},s=function(e){return w.call(y,e)}}else{var x=h("state");d[x]=!0,r=function(e,t){return t.facade=e,u(e,x,t),t},i=function(e){return l(e,x)?e[x]:{}},s=function(e){return l(e,x)}}e.exports={set:r,get:i,has:s,enforce:v,getterFor:g}},"6eeb":function(e,t,n){var r=n("da84"),i=n("9112"),s=n("5135"),o=n("ce4e"),a=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,a){var c,u=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||i(n,"name",t),c=l(n),c.source||(c.source=f.join("string"==typeof t?t:""))),e!==r?(u?!d&&e[t]&&(h=!0):delete e[t],h?e[t]=n:i(e,t,n)):h?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},"6f53":function(e,t,n){var r=n("83ab"),i=n("df75"),s=n("fc6a"),o=n("d1e7").f,a=function(e){return function(t){var n,a=s(t),c=i(a),u=c.length,l=0,f=[];while(u>l)n=c[l++],r&&!o.call(a,n)||f.push(e?[n,a[n]]:a[n]);return f}};e.exports={entries:a(!0),values:a(!1)}},7037:function(e,t,n){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0"),e.exports=r},7156:function(e,t,n){var r=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var s,o;return i&&"function"==typeof(s=t.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&i(e,o),e}},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("5135"),s=n("e538"),o=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a77":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"7aac":function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,i=n("825a"),s=n("37e8"),o=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),f=">",h="<",d="prototype",p="script",v=l("IE_PROTO"),g=function(){},y=function(e){return h+p+f+e+h+"/"+p+f},m=function(e){e.write(y("")),e.close();var t=e.parentWindow.Object;return e=null,t},w=function(){var e,t=u("iframe"),n="java"+p+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(y("document.F=Object")),e.close(),e.F},b=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}b=r?m(r):w();var e=o.length;while(e--)delete b[d][o[e]];return b()};a[v]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[d]=i(e),n=new g,g[d]=null,n[v]=e):n=b(),void 0===t?n:s(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("9ed3"),s=n("e163"),o=n("d2bb"),a=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),f=n("c430"),h=n("3f8c"),d=n("ae93"),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y="keys",m="values",w="entries",b=function(){return this};e.exports=function(e,t,n,l,d,x,_){i(n,t,l);var k,E,C,S=function(e){if(e===d&&P)return P;if(!v&&e in U)return U[e];switch(e){case y:return function(){return new n(this,e)};case m:return function(){return new n(this,e)};case w:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",O=!1,U=e.prototype,A=U[g]||U["@@iterator"]||d&&U[d],P=!v&&A||S(d),j="Array"==t&&U.entries||A;if(j&&(k=s(j.call(new e)),p!==Object.prototype&&k.next&&(f||s(k)===p||(o?o(k,p):"function"!=typeof k[g]&&c(k,g,b)),a(k,R,!0,!0),f&&(h[R]=b))),d==m&&A&&A.name!==m&&(O=!0,P=function(){return A.call(this)}),f&&!_||U[g]===P||c(U,g,P),h[t]=P,d)if(E={values:S(m),keys:x?P:S(y),entries:S(w)},_)for(C in E)(v||O||!(C in U))&&u(U,C,E[C]);else r({target:t,proto:!0,forced:v||O},E);return E}},"7f9a":function(e,t,n){var r=n("da84"),i=n("8925"),s=r.WeakMap;e.exports="function"===typeof s&&/native code/.test(i(s))},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,n){"use strict";var r=n("d925"),i=n("e683");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},8418:function(e,t,n){"use strict";var r=n("c04e"),i=n("9bf2"),s=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8875:function(e,t,n){var r,i,s;(function(n,o){i=[],r=o,s="function"===typeof r?r.apply(t,i):r,void 0===s||(e.exports=s)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var n,r,i,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,a=s.exec(d.stack)||o.exec(d.stack),c=a&&a[1]||!1,u=a&&a[2]||!1,l=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");c===l&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(r,"$1").trim());for(var h=0;h<f.length;h++){if("interactive"===f[h].readyState)return f[h];if(f[h].src===c)return f[h];if(c===l&&f[h].innerHTML&&f[h].innerHTML.trim()===i)return f[h]}return null}}return e}))},8925:function(e,t,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8df4":function(e,t,n){"use strict";var r=n("7a77");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),s=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+e[t+f],f+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=u}return(d?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+f>=1?h/c:h*Math.pow(2,1-f),t*c>=2&&(o++,c/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(t*c-1)*Math.pow(2,i),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[n+d]=255&o,d+=p,o/=256,u-=8);e[n+d-p]|=128*v}},9263:function(e,t,n){"use strict";var r=n("ad6d"),i=n("9f7f"),s=RegExp.prototype.exec,o=String.prototype.replace,a=s,c=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],f=c||l||u;f&&(a=function(e){var t,n,i,a,f=this,h=u&&f.sticky,d=r.call(f),p=f.source,v=0,g=e;return h&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),g=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,v++),n=new RegExp("^(?:"+p+")",d)),l&&(n=new RegExp("^"+p+"$(?!\\s)",d)),c&&(t=f.lastIndex),i=s.call(h?n:f,g),h?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:c&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),l&&i&&i.length>1&&o.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),e.exports=a},"94ca":function(e,t,n){var r=n("d039"),i=/#|\.prototype\./,s=function(e,t){var n=a[o(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},o=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},9523:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(j){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),o=new U(r||[]);return s._invoke=C(e,n,o),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function m(){}var w={};w[s]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==n&&r.call(x,s)&&(w=x);var _=m.prototype=g.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,s,o,a){var c=l(e[i],e,s);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(f).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var i;function s(e,r){function s(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(s,s):s()}this._invoke=s}function C(e,t,n){var r=f;return function(i,s){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return P()}n.method=i,n.arg=s;while(1){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e){var n=e[s];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=_.constructor=m,m.constructor=y,y.displayName=c(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(E.prototype),E.prototype[o]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new E(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),c(_,a,"Generator"),_[s]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},"970b":function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},"9b42":function(e,t,n){function r(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)if(n.push(o.value),t&&n.length===t)break}catch(c){i=!0,s=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw s}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0"),e.exports=r},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},"9bf2":function(e,t,n){var r=n("83ab"),i=n("0cfb"),s=n("825a"),o=n("c04e"),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(s(e),t=o(t,!0),s(n),i)try{return a(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),s=n("5c6c"),o=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:s(1,n)}),o(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,n){"use strict";var r=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("44ad"),s=n("fc6a"),o=n("a640"),a=[].join,c=i!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return a.call(s(this),void 0===e?",":e)}})},a34a:function(e,t,n){e.exports=n("96cf")},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("23cb"),s=n("a691"),o=n("50c4"),a=n("7b0b"),c=n("65f0"),u=n("8418"),l=n("1dde"),f=n("ae40"),h=l("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,g=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!d},{splice:function(e,t){var n,r,l,f,h,d,m=a(this),w=o(m.length),b=i(e,w),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=w-b):(n=x-2,r=v(p(s(t),0),w-b)),w+n-r>g)throw TypeError(y);for(l=c(m,r),f=0;f<r;f++)h=b+f,h in m&&u(l,f,m[h]);if(l.length=r,n<r){for(f=b;f<w-r;f++)h=f+r,d=f+n,h in m?m[d]=m[h]:delete m[d];for(f=w;f>w-r+n;f--)delete m[f-1]}else if(n>r)for(f=w-r;f>b;f--)h=f+r-1,d=f+n-1,h in m?m[d]=m[h]:delete m[d];for(f=0;f<n;f++)m[f+b]=arguments[f+2];return m.length=w-r+n,l}})},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("d066"),o=n("c430"),a=n("83ab"),c=n("4930"),u=n("fdbf"),l=n("d039"),f=n("5135"),h=n("e8b5"),d=n("861d"),p=n("825a"),v=n("7b0b"),g=n("fc6a"),y=n("c04e"),m=n("5c6c"),w=n("7c73"),b=n("df75"),x=n("241c"),_=n("057f"),k=n("7418"),E=n("06cf"),C=n("9bf2"),S=n("d1e7"),R=n("9112"),O=n("6eeb"),U=n("5692"),A=n("f772"),P=n("d012"),j=n("90e3"),T=n("b622"),I=n("e538"),M=n("746f"),L=n("d44e"),D=n("69f3"),B=n("b727").forEach,N=A("hidden"),F="Symbol",$="prototype",Y=T("toPrimitive"),z=D.set,H=D.getterFor(F),q=Object[$],W=i.Symbol,G=s("JSON","stringify"),K=E.f,J=C.f,V=_.f,X=S.f,Q=U("symbols"),Z=U("op-symbols"),ee=U("string-to-symbol-registry"),te=U("symbol-to-string-registry"),ne=U("wks"),re=i.QObject,ie=!re||!re[$]||!re[$].findChild,se=a&&l((function(){return 7!=w(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(q,t);r&&delete q[t],J(e,t,n),r&&e!==q&&J(q,t,r)}:J,oe=function(e,t){var n=Q[e]=w(W[$]);return z(n,{type:F,tag:e,description:t}),a||(n.description=t),n},ae=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ce=function(e,t,n){e===q&&ce(Z,t,n),p(e);var r=y(t,!0);return p(n),f(Q,r)?(n.enumerable?(f(e,N)&&e[N][r]&&(e[N][r]=!1),n=w(n,{enumerable:m(0,!1)})):(f(e,N)||J(e,N,m(1,{})),e[N][r]=!0),se(e,r,n)):J(e,r,n)},ue=function(e,t){p(e);var n=g(t),r=b(n).concat(pe(n));return B(r,(function(t){a&&!fe.call(n,t)||ce(e,t,n[t])})),e},le=function(e,t){return void 0===t?w(e):ue(w(e),t)},fe=function(e){var t=y(e,!0),n=X.call(this,t);return!(this===q&&f(Q,t)&&!f(Z,t))&&(!(n||!f(this,t)||!f(Q,t)||f(this,N)&&this[N][t])||n)},he=function(e,t){var n=g(e),r=y(t,!0);if(n!==q||!f(Q,r)||f(Z,r)){var i=K(n,r);return!i||!f(Q,r)||f(n,N)&&n[N][r]||(i.enumerable=!0),i}},de=function(e){var t=V(g(e)),n=[];return B(t,(function(e){f(Q,e)||f(P,e)||n.push(e)})),n},pe=function(e){var t=e===q,n=V(t?Z:g(e)),r=[];return B(n,(function(e){!f(Q,e)||t&&!f(q,e)||r.push(Q[e])})),r};if(c||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=j(e),n=function(e){this===q&&n.call(Z,e),f(this,N)&&f(this[N],t)&&(this[N][t]=!1),se(this,t,m(1,e))};return a&&ie&&se(q,t,{configurable:!0,set:n}),oe(t,e)},O(W[$],"toString",(function(){return H(this).tag})),O(W,"withoutSetter",(function(e){return oe(j(e),e)})),S.f=fe,C.f=ce,E.f=he,x.f=_.f=de,k.f=pe,I.f=function(e){return oe(T(e),e)},a&&(J(W[$],"description",{configurable:!0,get:function(){return H(this).description}}),o||O(q,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),B(b(ne),(function(e){M(e)})),r({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(ee,t))return ee[t];var n=W(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(f(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:le,defineProperty:ce,defineProperties:ue,getOwnPropertyDescriptor:he}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:de,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:l((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(v(e))}}),G){var ve=!c||l((function(){var e=W();return"[null]"!=G([e])||"{}"!=G({a:e})||"{}"!=G(Object(e))}));r({target:"JSON",stat:!0,forced:ve},{stringify:function(e,t,n){var r,i=[e],s=1;while(arguments.length>s)i.push(arguments[s++]);if(r=t,(d(t)||void 0!==e)&&!ae(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ae(t))return t}),i[1]=t,G.apply(null,i)}})}W[$][Y]||R(W[$],Y,W[$].valueOf),L(W,F),P[N]=!0},a559:function(e,t,n){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n("cca6"),e.exports=r},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),s=n("1c7e"),o=!s((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:i})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae40:function(e,t,n){var r=n("83ab"),i=n("d039"),s=n("5135"),o=Object.defineProperty,a={},c=function(e){throw e};e.exports=function(e,t){if(s(a,e))return a[e];t||(t={});var n=[][e],u=!!s(t,"ACCESSORS")&&t.ACCESSORS,l=s(t,0)?t[0]:c,f=s(t,1)?t[1]:void 0;return a[e]=!!n&&!i((function(){if(u&&!r)return!0;var e={length:-1};u?o(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,f)}))}},ae93:function(e,t,n){"use strict";var r,i,s,o=n("d039"),a=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),f=n("c430"),h=l("iterator"),d=!1,p=function(){return this};[].keys&&(s=[].keys(),"next"in s?(i=a(a(s)),i!==Object.prototype&&(r=i)):d=!0);var v=void 0==r||o((function(){var e={};return r[h].call(e)!==e}));v&&(r={}),f&&!v||u(r,h)||c(r,h,p),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,s=Function.prototype,o=s.toString,a=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&i(s,c,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(e){return""}}})},b50d:function(e,t,n){"use strict";var r=n("c532"),i=n("467f"),s=n("7aac"),o=n("30b5"),a=n("83b9"),c=n("c345"),u=n("3934"),l=n("2d83");e.exports=function(e){return new Promise((function(t,n){var f=e.data,h=e.headers;r.isFormData(f)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(p+":"+v)}var g=a(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?c(d.getAllResponseHeaders()):null,s=e.responseType&&"text"!==e.responseType?d.response:d.responseText,o={data:s,status:d.status,statusText:d.statusText,headers:r,config:e,request:d};i(t,n,o),d=null}},d.onabort=function(){d&&(n(l("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(l("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||u(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}if("setRequestHeader"in d&&r.forEach(h,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),n(e),d=null)})),f||(f=null),d.send(f)}))}},b575:function(e,t,n){var r,i,s,o,a,c,u,l,f=n("da84"),h=n("06cf").f,d=n("2cf4").set,p=n("1cdc"),v=n("a4b4"),g=n("605d"),y=f.MutationObserver||f.WebKitMutationObserver,m=f.document,w=f.process,b=f.Promise,x=h(f,"queueMicrotask"),_=x&&x.value;_||(r=function(){var e,t;g&&(e=w.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():s=void 0,n}}s=void 0,e&&e.enter()},p||g||v||!y||!m?b&&b.resolve?(u=b.resolve(void 0),l=u.then,o=function(){l.call(u,r)}):o=g?function(){w.nextTick(r)}:function(){d.call(f,r)}:(a=!0,c=m.createTextNode(""),new y(r).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),e.exports=_||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,o()),s=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),s=n("5135"),o=n("90e3"),a=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||o;e.exports=function(e){return s(u,e)||(a&&s(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),s=n("e3db");function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=u.prototype):(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,r):"string"===typeof t?p(e,t,n):y(e,t)}function f(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t,n,r){return f(t),t<=0?c(e,t):void 0!==n?"string"===typeof r?c(e,t).fill(n,r):c(e,t).fill(n):c(e,t)}function d(e,t){if(f(t),e=c(e,t<0?0:0|m(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(t,n);e=c(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function v(e,t){var n=t.length<0?0:0|m(t.length);e=c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function g(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=u.prototype):e=v(e,t),e}function y(e,t){if(u.isBuffer(t)){var n=0|m(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):v(e,t);if("Buffer"===t.type&&s(t.data))return v(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function w(e){return+e!=e&&(e=0),u.alloc(+e)}function b(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){var s,o=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=n;s<a;s++)if(u(e,s)===u(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var f=!0,h=0;h<c;h++)if(u(e,s+h)!==u(t,h)){f=!1;break}if(f)return s}return-1}function C(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function S(e,t,n,r){return ee(V(t,e.length-n),e,n,r)}function R(e,t,n,r){return ee(X(t),e,n,r)}function O(e,t,n,r){return R(e,t,n,r)}function U(e,t,n,r){return ee(Z(t),e,n,r)}function A(e,t,n,r){return ee(Q(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var s,o,a,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:s=e[i+1],128===(192&s)&&(c=(31&u)<<6|63&s,c>127&&(l=c));break;case 3:s=e[i+1],o=e[i+2],128===(192&s)&&128===(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return I(r)}t.Buffer=u,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return h(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=b,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):x.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,o=n-t,a=Math.min(s,o),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){s=c[f],o=l[f];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return R(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return U(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function I(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=J(e[s]);return i}function B(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,r,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Y(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function z(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,s){return s||z(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,s){return s||z(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);var r=this[e],i=1,s=0;while(++s<t&&(i*=256))r+=this[e+s]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);var r=this[e],i=1,s=0;while(++s<t&&(i*=256))r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);var r=t,i=1,s=this[e+--r];while(r>0&&(i*=256))s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;F(this,e,t,n,i,0)}var s=1,o=0;this[t]=255&e;while(++o<n&&(s*=256))this[t+o]=e/s&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;F(this,e,t,n,i,0)}var s=n-1,o=1;this[t+s]=255&e;while(--s>=0&&(o*=256))this[t+s]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Y(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Y(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;this[t]=255&e;while(++s<n&&(o*=256))e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;this[t+s]=255&e;while(--s>=0&&(o*=256))e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Y(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Y(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:V(new u(e,r).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function G(e){if(e=K(e).replace(W,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n,r,i,s=[],o=0;o<e.length;++o){if((t-=2)<0)break;n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r)}return s}function Z(e){return r.toByteArray(G(e))}function ee(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function te(e){return e!==e}}).call(this,n("c8ba"))},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),s=n("df75"),o=n("d039"),a=o((function(){s(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return s(i(e))}})},b727:function(e,t,n){var r=n("0366"),i=n("44ad"),s=n("7b0b"),o=n("50c4"),a=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,f=6==e,h=7==e,d=5==e||f;return function(p,v,g,y){for(var m,w,b=s(p),x=i(b),_=r(v,g,3),k=o(x.length),E=0,C=y||a,S=t?C(p,k):n||h?C(p,0):void 0;k>E;E++)if((d||E in x)&&(m=x[E],w=_(m,E,b),e))if(t)S[E]=w;else if(w)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:c.call(S,m)}else switch(e){case 4:return!1;case 7:c.call(S,m)}return f?-1:u||l?l:S}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},bc3a:function(e,t,n){e.exports=n("cee4")},c04e:function(e,t,n){var r=n("861d");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},c135:function(e,t){function n(e){if(Array.isArray(e))return e}e.exports=n},c240:function(e,t){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n},c345:function(e,t,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},c401:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,n){"use strict";var r=n("1d2b"),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function o(e){return"undefined"===typeof e}function a(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return"undefined"!==typeof FormData&&e instanceof FormData}function l(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function f(e){return"string"===typeof e}function h(e){return"number"===typeof e}function d(e){return null!==e&&"object"===typeof e}function p(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function v(e){return"[object Date]"===i.call(e)}function g(e){return"[object File]"===i.call(e)}function y(e){return"[object Blob]"===i.call(e)}function m(e){return"[object Function]"===i.call(e)}function w(e){return d(e)&&m(e.pipe)}function b(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function x(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function _(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function k(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function E(){var e={};function t(t,n){p(e[n])&&p(t)?e[n]=E(e[n],t):p(t)?e[n]=E({},t):s(t)?e[n]=t.slice():e[n]=t}for(var n=0,r=arguments.length;n<r;n++)k(arguments[n],t);return e}function C(e,t,n){return k(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e}function S(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:s,isArrayBuffer:c,isBuffer:a,isFormData:u,isArrayBufferView:l,isString:f,isNumber:h,isObject:d,isPlainObject:p,isUndefined:o,isDate:v,isFile:g,isBlob:y,isFunction:m,isStream:w,isURLSearchParams:b,isStandardBrowserEnv:_,forEach:k,merge:E,extend:C,trim:x,stripBOM:S}},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},c8af:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("d039"),i=n("5899"),s="";e.exports=function(e){return r((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}},c973:function(e,t,n){function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)}))}}n("d3b7"),n("e6cf"),e.exports=i},c975:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,s=n("a640"),o=n("ae40"),a=[].indexOf,c=!!a&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(e){return c?a.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,t,n){var r=n("5135"),i=n("fc6a"),s=n("4d64").indexOf,o=n("d012");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)!r(o,n)&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~s(u,n)||u.push(n));return u}},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),s=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=s.f(e),o=n.resolve;return o(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),i=n("9112");e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},cee4:function(e,t,n){"use strict";var r=n("c532"),i=n("1d2b"),s=n("0a06"),o=n("4a7b"),a=n("2444");function c(e){var t=new s(e),n=i(s.prototype.request,t);return r.extend(n,s.prototype,t),r.extend(n,t),n}var u=c(a);u.Axios=s,u.create=function(e){return c(o(u.defaults,e))},u.Cancel=n("7a77"),u.CancelToken=n("8df4"),u.isCancel=n("2e67"),u.all=function(e){return Promise.all(e)},u.spread=n("0df6"),u.isAxiosError=n("5f02"),e.exports=u,e.exports.default=u},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("428f"),i=n("da84"),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e])||s(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("825a"),i=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(s){}return function(n,s){return r(n),i(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),s=n("b041");r||i(Object.prototype,"toString",s,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("5135"),s=n("b622"),o=s("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},d58f:function(e,t,n){var r=n("1c0b"),i=n("7b0b"),s=n("44ad"),o=n("50c4"),a=function(e){return function(t,n,a,c){r(n);var u=i(t),l=s(u),f=o(u.length),h=e?f-1:0,d=e?-1:1;if(a<2)while(1){if(h in l){c=l[h],h+=d;break}if(h+=d,e?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=d)h in l&&(c=n(c,l[h],h,u));return c}};e.exports={left:a(!1),right:a(!0)}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),s=n("b622"),o=n("9263"),a=n("9112"),c=s("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=s("replace"),h=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),d=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=s(e),v=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!g||"replace"===e&&(!u||!l||h)||"split"===e&&!d){var y=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===o?v&&!i?{done:!0,value:y.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),w=m[0],b=m[1];r(String.prototype,e,w),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&a(RegExp.prototype[p],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,s=n("1dde"),o=n("ae40"),a=s("map"),c=o("map");r({target:"Array",proto:!0,forced:!a||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),s=n("56ef"),o=n("fc6a"),a=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),i=a.f,u=s(r),l={},f=0;while(u.length>f)n=i(r,t=u[f++]),void 0!==n&&c(l,t,n);return l}})},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),s=n("e260"),o=n("9112"),a=n("b622"),c=a("iterator"),u=a("toStringTag"),l=s.values;for(var f in i){var h=r[f],d=h&&h.prototype;if(d){if(d[c]!==l)try{o(d,c,l)}catch(v){d[c]=l}if(d[u]||o(d,u,f),i[f])for(var p in s)if(d[p]!==s[p])try{o(d,p,s[p])}catch(v){d[p]=s[p]}}}},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,r="/"===o.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===s(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),s=r(n.split("/")),o=Math.min(i.length,s.length),a=o,c=0;c<o;c++)if(i[c]!==s[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return u=u.concat(s.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),47===t){if(!i){r=s;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,s=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(47!==a)-1===r&&(i=!1,r=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),s=n("da84"),o=n("5135"),a=n("861d"),c=n("9bf2").f,u=n("e893"),l=s.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};u(h,l);var d=h.prototype=l.prototype;d.constructor=h;var p=d.toString,v="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=p.call(e);if(o(f,e))return"";var n=v?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},e163:function(e,t,n){var r=n("5135"),i=n("7b0b"),s=n("f772"),o=n("e177"),a=s("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),s=n("3f8c"),o=n("69f3"),a=n("7dd0"),c="Array Iterator",u=o.set,l=o.getterFor(c);e.exports=a(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),s=n("fc6a"),o=n("06cf").f,a=n("83ab"),c=i((function(){o(1)})),u=!a||c;r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(e,t){return o(s(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e556:function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,n){"use strict";var r,i,s,o,a=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),f=n("fea9"),h=n("6eeb"),d=n("e2cc"),p=n("d44e"),v=n("2626"),g=n("861d"),y=n("1c0b"),m=n("19aa"),w=n("8925"),b=n("2266"),x=n("1c7e"),_=n("4840"),k=n("2cf4").set,E=n("b575"),C=n("cdf9"),S=n("44de"),R=n("f069"),O=n("e667"),U=n("69f3"),A=n("94ca"),P=n("b622"),j=n("605d"),T=n("2d00"),I=P("species"),M="Promise",L=U.get,D=U.set,B=U.getterFor(M),N=f,F=u.TypeError,$=u.document,Y=u.process,z=l("fetch"),H=R.f,q=H,W=!!($&&$.createEvent&&u.dispatchEvent),G="function"==typeof PromiseRejectionEvent,K="unhandledrejection",J="rejectionhandled",V=0,X=1,Q=2,Z=1,ee=2,te=A(M,(function(){var e=w(N)!==String(N);if(!e){if(66===T)return!0;if(!j&&!G)return!0}if(c&&!N.prototype["finally"])return!0;if(T>=51&&/native code/.test(N))return!1;var t=N.resolve(1),n=function(e){e((function(){}),(function(){}))},r=t.constructor={};return r[I]=n,!(t.then((function(){}))instanceof n)})),ne=te||!x((function(e){N.all(e)["catch"]((function(){}))})),re=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;E((function(){var r=e.value,i=e.state==X,s=0;while(n.length>s){var o,a,c,u=n[s++],l=i?u.ok:u.fail,f=u.resolve,h=u.reject,d=u.domain;try{l?(i||(e.rejection===ee&&ce(e),e.rejection=Z),!0===l?o=r:(d&&d.enter(),o=l(r),d&&(d.exit(),c=!0)),o===u.promise?h(F("Promise-chain cycle")):(a=re(o))?a.call(o,f,h):f(o)):h(r)}catch(p){d&&!c&&d.exit(),h(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},se=function(e,t,n){var r,i;W?(r=$.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!G&&(i=u["on"+e])?i(r):e===K&&S("Unhandled promise rejection",n)},oe=function(e){k.call(u,(function(){var t,n=e.facade,r=e.value,i=ae(e);if(i&&(t=O((function(){j?Y.emit("unhandledRejection",r,n):se(K,n,r)})),e.rejection=j||ae(e)?ee:Z,t.error))throw t.value}))},ae=function(e){return e.rejection!==Z&&!e.parent},ce=function(e){k.call(u,(function(){var t=e.facade;j?Y.emit("rejectionHandled",t):se(J,t,e.value)}))},ue=function(e,t,n){return function(r){e(t,r,n)}},le=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Q,ie(e,!0))},fe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var r=re(t);r?E((function(){var n={done:!1};try{r.call(t,ue(fe,n,e),ue(le,n,e))}catch(i){le(n,i,e)}})):(e.value=t,e.state=X,ie(e,!1))}catch(i){le({done:!1},i,e)}}};te&&(N=function(e){m(this,N,M),y(e),r.call(this);var t=L(this);try{e(ue(fe,t),ue(le,t))}catch(n){le(t,n)}},r=function(e){D(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:V,value:void 0})},r.prototype=d(N.prototype,{then:function(e,t){var n=B(this),r=H(_(this,N));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=j?Y.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=V&&ie(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=L(e);this.promise=e,this.resolve=ue(fe,t),this.reject=ue(le,t)},R.f=H=function(e){return e===N||e===s?new i(e):q(e)},c||"function"!=typeof f||(o=f.prototype.then,h(f.prototype,"then",(function(e,t){var n=this;return new N((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(N,z.apply(u,arguments))}}))),a({global:!0,wrap:!0,forced:te},{Promise:N}),p(N,M,!1,!0),v(M),s=l(M),a({target:M,stat:!0,forced:te},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),a({target:M,stat:!0,forced:c||te},{resolve:function(e){return C(c&&this===s?N:this,e)}}),a({target:M,stat:!0,forced:ne},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,s=O((function(){var n=y(t.resolve),s=[],o=0,a=1;b(e,(function(e){var c=o++,u=!1;s.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,s[c]=e,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=O((function(){var i=y(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(e,t,n){var r=n("5135"),i=n("56ef"),s=n("06cf"),o=n("9bf2");e.exports=function(e,t){for(var n=i(t),a=o.f,c=s.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||a(e,l,c(t,l))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},f069:function(e,t,n){"use strict";var r=n("1c0b"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f0e4:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n("c975"),n("b64b"),e.exports=r},f5df:function(e,t,n){var r=n("00ee"),i=n("c6b6"),s=n("b622"),o=s("toStringTag"),a="Arguments"==i(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},f6b4:function(e,t,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var r=window.document.currentScript,i=n("8875");r=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var s=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(n.p=s[1])}n("4160"),n("b64b"),n("159b");var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tw-w-full tw-h-full tw-relative vuesora-override"},[n("div",{staticClass:"tw-h-10 tw-w-full tw-border-b tw-border-gray-600 tw-flex tw-flex-row tw-place-items-center"},[e.channel?n("a",{staticClass:"tw-no-underline tw-font-semibold tw-ml-4",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleShowMembers(t)}}},[e._v(e._s(e.$_watcher_count)+" ONLINE")]):e._e()]),e.showMembers?n("div",{staticClass:"cs-members-container tw-absolute tw-top-10 mt-1 tw-left-0 tw-right-0 tw-overflow-y-auto tw-z-40"},[n("div",{staticClass:"tw-bg-gray-50 tw-p-3"},e._l(e.$_watchers,(function(e){return n("div",{key:e.id,staticClass:"tw-py-2"},[n("chat-user",{attrs:{user:e}})],1)})),0)]):e._e(),n("div",{ref:"messages",staticClass:"cs-messages-container tw-absolute tw-top-10 mt-1 tw-left-0 tw-right-0 tw-overflow-y-auto"},[n("div",{staticClass:"tw-mt-4"},[e._l(e.$_messages,(function(t){return n("div",{key:t.id},[n("chat-message",{attrs:{"is-administrator":e.isAdministrator,message:t,"user-id":e.userId}})],1)})),e._l(e.messageErrors,(function(t,r){return n("div",{key:"error-message-"+r,staticClass:"tw-p-3 tw-text-red-400"},[e._v(e._s(t))])}))],2)]),e.showDialog?n("div",{staticClass:"cs-dialog-container tw-absolute tw-top-0 tw-bottom-0 tw-left-0 tw-right-0 tw-z-10"},[n("div",{staticClass:"tw-w-full tw-h-full tw-relative"},[n("div",{staticClass:"tw-absolute tw-inset-0 tw-bg-black tw-bg-opacity-25 tw-z-20",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeDialog()}}}),n("div",{staticClass:"tw-w-full tw-h-full tw-flex tw-flex-col tw-place-content-center tw-place-items-center"},[n("div",{staticClass:"cs-dialog-window tw-flex-none tw-w-3/4 tw-bg-white tw-z-30"},[n("div",{staticClass:"tw-bg-gray-200 tw-py-4 tw-px-3 tw-flex tw-items-center tw-place-content-between"},[n("span",{staticClass:"tw-font-semibold tw-text-gray-700"},[e._v("Delete message?")]),n("i",{staticClass:"fal fa-times tw-font-semibold tw-cursor-pointer",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeDialog()}}})]),n("div",{staticClass:"tw-p-3"},[n("p",[e._v("This message will be permanently removed!")]),n("div",{staticClass:"tw-flex tw-items-center tw-mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.messageRemove.blockUser,expression:"messageRemove.blockUser",modifiers:{lazy:!0}}],attrs:{type:"checkbox",id:"block-user"},domProps:{checked:Array.isArray(e.messageRemove.blockUser)?e._i(e.messageRemove.blockUser,null)>-1:e.messageRemove.blockUser},on:{change:function(t){var n=e.messageRemove.blockUser,r=t.target,i=!!r.checked;if(Array.isArray(n)){var s=null,o=e._i(n,s);r.checked?o<0&&e.$set(e.messageRemove,"blockUser",n.concat([s])):o>-1&&e.$set(e.messageRemove,"blockUser",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.messageRemove,"blockUser",i)}}}),n("label",{staticClass:"tw-ml-1 tw-select-none",attrs:{for:"block-user"}},[e._v("Block "+e._s(e.messageRemove.userDisplayName))])])]),n("div",{staticClass:"tw-flex tw-flex-row tw-justify-center tw-py-4 tw-px-3"},[n("div",{staticClass:"tw-cursor-pointer tw-rounded-full tw-leading-none tw-font-bold focus:tw-outline-none focus:tw-shadow-outline tw-uppercase tw-border-2 tw-border-blue-600 tw-text-blue-600 tw-py-2 tw-w-24 tw-flex tw-justify-center tw-mr-2",attrs:{title:"Cancel message edit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeDialog()}}},[e._v("Cancel")]),n("div",{staticClass:"tw-cursor-pointer tw-cursor-pointer tw-rounded-full tw-leading-none tw-font-bold focus:tw-outline-none focus:tw-shadow-outline tw-uppercase tw-border-2 tw-border-blue-600 tw-text-white tw-bg-blue-600 tw-py-2 tw-w-24 tw-flex tw-justify-center",attrs:{title:"Save message updates"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeDialog(!0)}}},[e._v("Ok")])])])])])]):e._e(),n("div",{staticClass:"cs-new-message-container box-border tw-absolute tw-bottom-0 tw-left-0 tw-right-0"},[n("div",{staticClass:"tw-flex tw-flex-col tw-p-4"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"Type a message and press enter"},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.message=t.target.value)}}})])])])},a=[];n("d81d"),n("13d5"),n("a434"),n("07ac"),n("498a"),n("a4d3"),n("4de4"),n("e439"),n("dbb4");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=n("36c4"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cs-message tw-p-3 hover:tw-bg-gray-100 tw-relative"},["regular"==e.message.type&&e.messageEdit.id!=e.message.id?n("div",{staticClass:"tw-flex tw-flex-col tw-max-w-full"},[n("chat-user",{attrs:{user:e.message.user},scopedSlots:e._u([{key:"footer",fn:function(){return[e.$_has_reactions?n("div",{staticClass:"tw-inline-flex tw-mt-1"},[n("div",{staticClass:"tw-flex tw-flex-row tw-rounded-lg tw-border tw-border-gray-400 tw-divide-x tw-divide-gray-400 tw-text-gray-500 tw-cursor-pointer"},e._l(e.message.reaction_counts,(function(t,r){return n("div",{key:"message-reaction-"+r,staticClass:"tw-flex tw-flex-row tw-place-content-center tw-p-1 hover:tw-text-black",attrs:{title:e.getReactionUsers(r)},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleMessageReaction(r)}}},[n("i",{class:e.getReactionClasses(r)}),n("span",{staticClass:"tw-text-xs tw-text-black cs-reaction-count"},[e._v(e._s(t))])])})),0)]):e._e()]},proxy:!0}],null,!1,123200989)},[n("span",{staticClass:"tw-mr-1 tw-font-semibold tw-text-sm"},[e._v(":")]),e.message.user.displayName.length>15?n("br"):e._e(),n("span",{staticClass:"tw-whitespace-normal",domProps:{innerHTML:e._s(e.getParsedMessage(e.message.text))}})]),n("chat-message-menu",{attrs:{"is-administrator":e.isAdministrator,message:e.message,"message-reactions":e.messageReactions,"user-id":e.userId}})],1):e._e(),"regular"==e.message.type&&e.messageEdit.id==e.message.id?n("div",[n("div",{staticClass:"cs-message-edit"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageEdit.text,expression:"messageEdit.text"}],domProps:{value:e.messageEdit.text},on:{input:function(t){t.target.composing||e.$set(e.messageEdit,"text",t.target.value)}}}),n("div",{staticClass:"tw-flex tw-flex-row tw-justify-end tw-mt-2"},[n("div",{staticClass:"tw-cursor-pointer tw-rounded-full tw-leading-none tw-font-bold focus:tw-outline-none focus:tw-shadow-outline tw-uppercase tw-border-2 tw-border-blue-600 tw-text-blue-600 tw-py-2 tw-w-24 tw-flex tw-justify-center tw-mr-2",attrs:{title:"Cancel message edit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.cancelMessageEdit()}}},[e._v("Cancel")]),n("div",{staticClass:"tw-cursor-pointer tw-cursor-pointer tw-rounded-full tw-leading-none tw-font-bold focus:tw-outline-none focus:tw-shadow-outline tw-uppercase tw-border-2 tw-border-blue-600 tw-text-white tw-bg-blue-600 tw-py-2 tw-w-24 tw-flex tw-justify-center",attrs:{title:"Save message updates"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.saveMessageEdit()}}},[e._v("Save")])])])]):e._e(),"system"==e.message.type?n("div",{staticClass:"tw-py-2 tw-text-gray-500"},[e._v(" "+e._s(e.message.text)+" ")]):e._e()])},d=[],p=(n("a15b"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cs-message-menu tw-absolute tw-text-base"},[n("div",{staticClass:"tw-flex tw-flex-row tw-bg-white tw-rounded-lg tw-border tw-border-gray-400 tw-divide-x tw-divide-gray-400 tw-text-gray-500 tw-cursor-pointer"},[n("div",{staticClass:"tw-px-2 hover:tw-text-black",class:{"tw-text-black":e.messageReact},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleMessageReact()}}},[n("i",{staticClass:"fal fa-smile"})]),e._m(0),n("div",{staticClass:"tw-px-2 hover:tw-text-black",class:{"tw-text-black":e.messageMenu},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleMessageMenu()}}},[n("i",{staticClass:"fal fa-ellipsis-h"})])]),n("div",{staticClass:"tw-relative"},[e.messageMenu?n("div",{staticClass:"tw-mt-1 tw-absolute tw-right-0 tw-flex tw-flex-row tw-bg-white tw-rounded-lg tw-text-gray-500 tw-text-center tw-cursor-pointer tw-text-sm"},[n("div",{staticClass:"hover:tw-text-black tw-px-2 tw-py-1"},[e._v("Pin")]),e.message.user.id==e.userId?n("div",{staticClass:"hover:tw-text-black tw-px-2 tw-py-1",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.editMessage()}}},[e._v("Edit")]):e._e(),e.isAdministrator?n("div",{staticClass:"hover:tw-text-black tw-px-2 tw-py-1",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.removeMessage()}}},[e._v("Remove")]):e._e()]):e._e(),e.messageReact?n("div",{staticClass:"tw-mt-1 tw-absolute tw-right-0 tw-flex tw-flex-row tw-bg-white tw-rounded-lg tw-text-gray-500 tw-text-center space-x-1 tw-px-1"},e._l(e.messageReactions,(function(t,r){return n("div",{key:"add-reaction-"+r,staticClass:"hover:tw-text-black tw-cursor-pointer tw-p-1",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.reactToMessage(r)}}},[n("i",{class:t})])})),0):e._e()])])}),v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tw-px-2 hover:tw-text-black"},[n("i",{staticClass:"fal fa-reply-all"})])}],g={name:"ChatMessageMenu",props:{message:{type:Object,default:function(){return{id:"",type:"",text:"",user:{displayName:"",avatarUrl:"",profileUrl:"",role:"",accessLevelName:""}}}},messageReactions:{type:Object,default:function(){return{}}},userId:{type:String},isAdministrator:{type:Boolean,default:function(){return!1}}},data:function(){return{messageMenu:!1,messageReact:!1}},mounted:function(){var e=this;this.$root.$on("messageMenuToggled",(function(t){var n=t.message;n.id!=e.message.id&&(e.messageReact=!1,e.messageMenu=!1)}))},methods:{toggleMessageMenu:function(){this.$root.$emit("messageMenuToggled",{message:this.message}),this.messageMenu=!this.messageMenu,this.messageReact=!1},toggleMessageReact:function(){this.$root.$emit("messageMenuToggled",{message:this.message}),this.messageReact=!this.messageReact,this.messageMenu=!1},editMessage:function(){this.$root.$emit("editMessage",{message:this.message})},removeMessage:function(){this.$root.$emit("removeMessage",{message:this.message})},reactToMessage:function(e){this.$root.$emit("toggleMessageReaction",{message:this.message,reaction:e})}}},y=g;function m(e,t,n,r,i,s,o,a){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:u}}var w=m(y,p,v,!1,null,null,null),b=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tw-flex tw-flex-row"},[n("div",{staticClass:"tw-flex-none tw-mr-1 tw-w-12 tw-h-12 tw-relative tw-overflow-hidden cs-user-avatar",class:e.getUserMembershipClass()},[n("a",{staticClass:"tw-no-underline",attrs:{href:e.user.profileUrl,target:"_blank"}},[n("img",{staticClass:"tw-max-w-full tw-h-auto",attrs:{src:e.user.avatarUrl}})])]),n("div",{staticClass:"tw-mt-2 tw-text-base tw-flex tw-flex-col"},[n("div",{},[n("a",{staticClass:"tw-no-underline hover:tw-underline tw-text-black tw-font-semibold tw-text-lg",attrs:{href:e.user.profileUrl,target:"_blank"}},[e._v(e._s(e.user.displayName))]),"admin"==e.user.role?n("span",{staticClass:"tw-ml-1 tw-font-semibold tw-text-sm"},[e._v("(Moderator)")]):e._e(),e._t("default")],2),e._t("footer")],2)])},_=[],k={name:"ChatUser",props:{user:{type:Object,default:function(){return{displayName:"",avatarUrl:"",profileUrl:"",role:"",accessLevelName:""}}}},methods:{getUserMembershipClass:function(){return"cs-membership-"+this.user.accessLevelName}}},E=k,C=m(E,x,_,!1,null,null,null),S=C.exports,R={name:"ChatMessage",components:{ChatMessageMenu:b,ChatUser:S},props:{message:{type:Object,default:function(){return{id:"",type:"",text:"",user:{displayName:"",avatarUrl:"",profileUrl:"",role:"",accessLevelName:""},own_reactions:[],reaction_counts:{}}}},userId:{type:String},isAdministrator:{type:Boolean,default:function(){return!1}}},data:function(){return{messageEdit:{id:null,text:""},messageReactions:{thumb:"fal fa-thumbs-up",heart:"fal fa-heart",laugh:"fal fa-laugh",surprised:"fal fa-surprise",sad:"fal fa-sad-tear",angry:"fal fa-angry"}}},computed:{$_has_reactions:{cache:!1,get:function(){return this.message&&this.message.reaction_counts&&Object.keys(this.message.reaction_counts).length>0}}},mounted:function(){var e=this;this.$root.$on("editMessage",(function(t){t.message.id==e.message.id?e.messageEdit={id:t.message.id,text:t.message.text}:e.cancelMessageEdit()}))},methods:{getUrlsParsedText:function(e){return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z09+&@#/%=~_|])/gim,'<a href="$1">$1</a>')},getEmoticonsParsedText:function(e){var t={":)":"fal fa-smile",":-)":"fal fa-laugh",":D":"fal fa-grin-beam",":-|":"fal fa-grin",":|":"fal fa-grin",":P":"fal fa-grin-tongue",":p":"fal fa-grin-tongue",":(":"fal fa-frown"},n=[],r=/[[\]{}()*+?.\\|^$\-,&#\s]/g;for(var i in t)t[i]&&n.push("("+i.replace(r,"\\$&")+")");return e.replace(new RegExp(n.join("|"),"g"),(function(e){return"undefined"!=typeof t[e]?'<i class="'.concat(t[e],'"></i>'):e}))},getParsedMessage:function(e){var t=this.getUrlsParsedText(e);return this.getEmoticonsParsedText(t)},cancelMessageEdit:function(){this.messageEdit={id:null,text:""}},saveMessageEdit:function(){this.$root.$emit("updateMessage",{message:this.message,text:this.messageEdit.text}),this.messageEdit={id:null,text:""}},getReactionClasses:function(e){return this.messageReactions[e]},toggleMessageReaction:function(e){this.$root.$emit("toggleMessageReaction",{message:this.message,reaction:e})},hasOwnReaction:function(e){var t=!1;return this.message.own_reactions.forEach((function(n){t=t||n.type==e})),t},formatReactionUsers:function(e,t){var n;switch(e.length){case 0:break;case 1:n=e[0];break;case 2:n=e[0]+" and "+e[1];break;case 3:n=e[0]+", "+e[1]+" and "+e[2];break;default:n=e[0]+", "+e[1]+" and "+(e.length-2)+" others"}return this.hasOwnReaction(t)&&(n=0==e.length?"You":1==e.length?"You and "+n:"You, "+n),n},getReactionUsers:function(e){var t=this,n=[];return this.message.reactions&&this.message.reactions.length&&(n=this.message.reactions.filter((function(n){return n.type==e&&n.user.id!=t.userId})).map((function(e){return e.user.displayName}))),n.length||this.hasOwnReaction(e)?this.formatReactionUsers(n,e):"Fetching user information..."}}},O=R,U=m(O,h,d,!1,null,null,null),A=U.exports,P={name:"Chat",components:{ChatMessage:A,ChatUser:S},props:{apiKey:{type:String},token:{type:String},userId:{type:String},channelName:{type:String},isAdministrator:{type:Boolean,default:function(){return!1}}},data:function(){return{message:"",messages:[],streamClient:null,channel:null,showMembers:!1,showDialog:!1,messageErrors:[],messageRemove:{id:null,userId:null,blockUser:!1},channelWatchers:{}}},computed:{$_messages:{cache:!1,get:function(){return this.messages}},$_messages_count:{cache:!1,get:function(){return Object.keys(this.messages).length}},$_watchers:{cache:!1,get:function(){return this.channelWatchers}},$_watcher_count:{cache:!1,get:function(){return Object.keys(this.channelWatchers).length}},$_errors_count:{cache:!1,get:function(){return this.messageErrors.length}}},mounted:function(){this.setupChat(),this.$root.$on("updateMessage",this.updateMessage),this.$root.$on("removeMessage",this.removeMessage),this.$root.$on("toggleMessageReaction",this.toggleMessageReaction)},watch:{$_messages_count:function(){this.scrollMessages()},$_errors_count:function(){this.scrollMessages()}},methods:{scrollMessages:function(){var e=this.$refs.messages;Math.ceil(e.scrollHeight-e.scrollTop)===e.clientHeight&&this.$nextTick((function(){e.scroll({top:e.scrollHeight,behavior:"smooth"})}))},sendMessage:function(){var e=this,t=this.message.trim();this.message="",t&&this.channel.sendMessage({text:t}).then((function(){e.messageErrors=[]})).catch((function(t){var n=t.response;e.errorHandler(n,"Message send error")}))},errorHandler:function(e,t){var n,r,i="".concat(t,", please try again, if the error persists contact support.");e&&(null!==(n=e.data)&&void 0!==n&&n.code?i=17==e.data.code?"".concat(t,", your account is currently suspended from chat, please contact support."):i+" Error code: "+e.data.code:null!==(r=e.data)&&void 0!==r&&r.StatusCode&&(i=i+" Error status code: "+e.data.StatusCode));this.messageErrors.push(i)},setupChat:function(){var e=this;this.streamClient=new f["a"](this.apiKey,{timeout:6e3}),this.streamClient.connectUser({id:this.userId},this.token).then((function(){return e.channel=e.streamClient.channel("messaging",e.channelName,{}),e.channel.watch()})).then((function(t){e.fetchWatchers(),e.processMessages(t);var n={id:"greeting",type:"system",text:"Welcome to chat!"};e.$set(e.messages,n.id,n),e.channel.on("user.watching.start",(function(t){var n=t.user;e.$set(e.channelWatchers,n.id,n)})),e.channel.on("user.watching.stop",(function(t){var n=t.user;e.channelWatchers[n.id]&&e.$delete(e.channelWatchers,n.id)})),e.channel.on("message.new",e.pushMessage),e.channel.on("message.updated",e.updateMessageText),e.channel.on("message.deleted",e.deleteMessage),e.channel.on("reaction.new",e.pushMessageReaction),e.channel.on("reaction.deleted",e.deleteMessageReaction)}))},fetchWatchers:function(){var e=this,t=1e3;this.channel.query({watchers:{limit:t,offset:0}}).then((function(t){var n=t.watchers;n&&n.forEach((function(t){e.$set(e.channelWatchers,t.id,t)}))}))},processMessages:function(e){var t=this,n=e.messages;n.forEach((function(e){"regular"==e.type&&t.pushMessage({message:e})}))},getUserCopy:function(e){var t=e.id,n=e.displayName,r=e.avatarUrl,i=e.profileUrl,s=e.role,o=e.accessLevelName;return{id:t,displayName:n,avatarUrl:r,profileUrl:i,role:s,accessLevelName:o}},pushMessage:function(e){var t=this,n=e.message,r=function(e){var t=e.id,n=e.type,r=e.text;return{id:t,type:n,text:r}}(n);r.user=this.getUserCopy(n.user),r.reaction_counts=l({},n.reaction_counts),r.own_reactions=n.own_reactions.map((function(e){var t=e.type;return{type:t}}));var i=Object.values(n.reaction_counts||{}).reduce((function(e,t){return e+t}),0);r.reactions=[],n.latest_reactions.length==i?n.latest_reactions.forEach((function(e){r.reactions.push({type:e.type,user:t.getUserCopy(e.user)})})):this.channel.getReactions(n.id,{limit:1e3}).then((function(e){var n=e.reactions;n.forEach((function(e){r.reactions.push({type:e.type,user:t.getUserCopy(e.user)})}))})),this.messages.push(r)},updateMessageText:function(e){var t=e.message;this.messages.forEach((function(e){e.id==t.id&&(e.text=t.text)}))},deleteMessage:function(e){var t,n=e.message;this.messages.forEach((function(e,r){e.id==n.id&&(t=r)})),this.messages.splice(t,1)},pushMessageReaction:function(e){var t=this,n=e.message,r=e.reaction;this.messages.forEach((function(e){e.id==n.id&&(e.reactions.push({type:r.type,user:t.getUserCopy(r.user)}),e.reaction_counts=l({},n.reaction_counts),r.user.id==t.userId&&e.own_reactions.push({type:r.type}))})),this.scrollMessages()},deleteMessageReaction:function(e){var t,n=this,r=e.message,i=e.reaction;this.messages.forEach((function(e){e.id==r.id&&(e.reactions.forEach((function(e,n){e.type==i.type&&e.user.id==i.user.id&&(t=n)})),e.reactions.splice(t,1),e.reaction_counts=l({},r.reaction_counts),i.user.id==n.userId&&(e.own_reactions.forEach((function(e,n){e.type==i.type&&(t=n)})),e.own_reactions.splice(t,1)))}))},toggleShowMembers:function(){this.showMembers=!this.showMembers},updateMessage:function(e){var t=this,n=e.message,r=e.text;this.streamClient.updateMessage({id:n.id,text:r}).then((function(){t.messageErrors=[]})).catch((function(e){var n=e.response;t.errorHandler(n,"Message update error")}))},removeMessage:function(e){var t=e.message;this.messageRemove={id:t.id,userId:t.user.id,userDisplayName:t.user.displayName,allMessages:!1,blockUser:!1},this.showDialog=!0},closeDialog:function(e){var t=this;e&&(this.streamClient.deleteMessage(this.messageRemove.id).then((function(){t.messageErrors=[]})).catch((function(e){var n=e.response;t.errorHandler(n,"Message delete error")})),this.messageRemove.blockUser&&this.channel.banUser(this.messageRemove.userId,{banned_by_id:this.userId,reason:"default"}).then((function(){t.messageErrors=[]})).catch((function(e){var n=e.response;t.errorHandler(n,"User ban error")}))),this.showDialog=!1,this.messageRemove={id:null,userId:null,userName:null,blockUser:!1}},hasOwnReaction:function(e,t){var n=!1;return e.own_reactions.forEach((function(e){n=n||e.type==t})),n},toggleMessageReaction:function(e){var t=this,n=e.message,r=e.reaction;this.hasOwnReaction(n,r)?this.channel.deleteReaction(n.id,r).then((function(){t.messageErrors=[]})).catch((function(e){var n=e.response;t.errorHandler(n,"Message reaction remove error")})):this.channel.sendReaction(n.id,{type:r}).then((function(){t.messageErrors=[]})).catch((function(e){var n=e.response;t.errorHandler(n,"Message reaction send error")}))}}},j=P,T=m(j,o,a,!1,null,null,null),I=T.exports,M={Chat:I},L=M,D=(n("29d8"),{install:function(e){Object.keys(L).forEach((function(t){e.component(t,L[t])}))}});t["default"]=D},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("861d"),s=n("e8b5"),o=n("23cb"),a=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),h=n("ae40"),d=f("slice"),p=h("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),g=[].slice,y=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var n,r,l,f=c(this),h=a(f.length),d=o(e,h),p=o(void 0===t?h:t,h);if(s(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?i(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(f,d,p);for(r=new(void 0===n?Array:n)(y(p-d,0)),l=0;d<p;d++,l++)d in f&&u(r,l,f[d]);return r.length=l,r}})},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},ff91:function(e,t,n){var r;(function(){"use strict";function i(e){var t="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element"),n=60103,r={use_static:!1};function s(e){return"object"===typeof e&&!Array.isArray(e)&&null!==e}function o(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function c(e,t){a(e,t,(function(){throw new w("The "+t+" method cannot be invoked on an Immutable data structure.")}))}s(e)&&void 0!==e.use_static&&(r.use_static=Boolean(e.use_static));var u="__immutable_invariants_hold";function l(e){a(e,u,!0)}function f(e){return"object"!==typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,u)))}function h(e,t){return e===t||e!==e&&t!==t}function d(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)&&!(e instanceof Date)}var p=["setPrototypeOf"],v=["keys"],g=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),y=v.concat(["map","filter","slice","concat","reduce","reduceRight"]),m=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function w(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function b(e,t){for(var n in l(e),t)t.hasOwnProperty(n)&&c(e,t[n]);return Object.freeze(e),e}function x(e,t){var n=e[t];a(e,t,(function(){return X(n.apply(e,arguments))}))}function _(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=X.merge(this[e],t,{deep:!0,mode:"replace"})),h(this[e],t)))return this;var i=A.call(this);return i[e]=X(t),C(i)}w.prototype=new Error,w.prototype.constructor=Error;var k=X([]);function E(e,t,n){var r=e[0];if(1===e.length)return _.call(this,r,t,n);var i,s=e.slice(1),o=this[r];if("object"===typeof o&&null!==o)i=X.setIn(o,s,t);else{var a=s[0];i=""!==a&&isFinite(a)?E.call(k,s,t):D.call(L,s,t)}if(r in this&&o===i)return this;var c=A.call(this);return c[r]=i,C(c)}function C(e){for(var t in y)if(y.hasOwnProperty(t)){var n=y[t];x(e,n)}r.use_static||(a(e,"flatMap",O),a(e,"asObject",P),a(e,"asMutable",A),a(e,"set",_),a(e,"setIn",E),a(e,"update",N),a(e,"updateIn",$),a(e,"getIn",Y));for(var i=0,s=e.length;i<s;i++)e[i]=X(e[i]);return b(e,g)}function S(e){return r.use_static||a(e,"asMutable",R),b(e,m)}function R(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var i=e(this[t],t,this);Array.isArray(i)?n.push.apply(n,i):n.push(i)}return C(n)}function U(e){if("undefined"===typeof e&&0===arguments.length)return this;if("function"!==typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"===typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=o(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return q(n)}function A(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(j(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function P(e){"function"!==typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var i=e(this[t],t,this),s=i[0],o=i[1];n[s]=o}return q(n)}function j(e){return!e||"object"!==typeof e||!Object.getOwnPropertyDescriptor(e,u)||e instanceof Date?e:X.asMutable(e,{deep:!0})}function T(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function I(e,t){if(0===arguments.length)return this;if(null===e||"object"!==typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,i=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",c=t&&t.merger;function u(e,r,i){var a,u=X(r[i]),l=c&&c(e[i],u,t),f=e[i];void 0===n&&void 0===l&&e.hasOwnProperty(i)&&h(u,f)||(a=void 0!==l?l:s&&d(f)&&d(u)?X.merge(f,u,t):u,h(f,a)&&e.hasOwnProperty(i)||(void 0===n&&(n=T(e,o(e))),n[i]=a))}function l(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=T(e,o(e))),delete n[r])}if(i)for(var f=0,p=e.length;f<p;f++){var v=e[f];for(r in v)v.hasOwnProperty(r)&&u(void 0!==n?n:this,v,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&u(this,e,r);"replace"===a&&l(this,e)}return void 0===n?this:q(n)}function M(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!==typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return X.merge(this,e,{deep:n,mode:"replace"})}var L=X({});function D(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return B.call(this,r,t,n);var i,s=e.slice(1),a=this[r];if(i=this.hasOwnProperty(r)&&"object"===typeof a&&null!==a?X.setIn(a,s,t):D.call(L,s,t),this.hasOwnProperty(r)&&a===i)return this;var c=T(this,o(this));return c[r]=i,q(c)}function B(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=X.merge(this[e],t,{deep:!0,mode:"replace"})),h(this[e],t)))return this;var i=T(this,o(this));return i[e]=X(t),q(i)}function N(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return X.set(this,e,t.apply(r,[r].concat(n)))}function F(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function $(e,t){var n=Array.prototype.slice.call(arguments,2),r=F(this,e);return X.setIn(this,e,t.apply(r,[r].concat(n)))}function Y(e,t){var n=F(this,e);return void 0===n?t:n}function z(e){var t,n=o(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=j(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function H(){return{}}function q(e){return r.use_static||(a(e,"merge",I),a(e,"replace",M),a(e,"without",U),a(e,"asMutable",z),a(e,"set",B),a(e,"setIn",D),a(e,"update",N),a(e,"updateIn",$),a(e,"getIn",Y)),b(e,p)}function W(e){return"object"===typeof e&&null!==e&&(e.$$typeof===n||e.$$typeof===t)}function G(e){return"undefined"!==typeof File&&e instanceof File}function K(e){return"undefined"!==typeof Blob&&e instanceof Blob}function J(e){return"object"===typeof e&&"function"===typeof e.then}function V(e){return e instanceof Error}function X(e,t,n){if(f(e)||W(e)||G(e)||K(e)||V(e))return e;if(J(e))return e.then(X);if(Array.isArray(e))return C(e.slice());if(e instanceof Date)return S(new Date(e.getTime()));var r=t&&t.prototype,i=r&&r!==Object.prototype?function(){return Object.create(r)}:H,s=i();if(null==n&&(n=64),n<=0)throw new w("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var o in n-=1,e)Object.getOwnPropertyDescriptor(e,o)&&(s[o]=X(e[o],void 0,n));return q(s)}function Q(e){function t(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}return t}function Z(e,t){function n(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}return n}function ee(e,t,n){function r(){var r=[].slice.call(arguments),i=r.shift();return Array.isArray(i)?t.apply(i,r):i instanceof Date?n.apply(i,r):e.apply(i,r)}return r}return X.from=X,X.isImmutable=f,X.ImmutableError=w,X.merge=Q(I),X.replace=Q(M),X.without=Q(U),X.asMutable=ee(z,A,R),X.set=Z(B,_),X.setIn=Z(D,E),X.update=Q(N),X.updateIn=Q($),X.getIn=Q(Y),X.flatMap=Q(O),X.asObject=Q(P),r.use_static||(X.static=i({use_static:!0})),Object.freeze(X),X}var s=i();r=function(){return s}.call(t,n,t,e),void 0===r||(e.exports=r)})()}})["default"]}));
//# sourceMappingURL=chatsora.umd.min.js.map